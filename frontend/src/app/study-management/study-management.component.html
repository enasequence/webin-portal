<div class="body">
    <div>
      <div class="back-div" ><mat-icon matTooltip="Back" routerLink="">arrow_back_ios</mat-icon></div>
      <div class="mat-h3 mat-tittle">Register study (project)</div>
    </div>
    <mat-divider></mat-divider>
    <form  (ngSubmit)="submitStudy(f)" #f="ngForm">
    <div class="container">
  
      <mat-card>
        <mat-card-subtitle>Submission Details</mat-card-subtitle>
        <div class="row">
          <div class="column">
            <mat-form-field  class="app-field-padding" *ngIf="action==='Edit'">
              <input  matInput placeholder="Project Id" required [(ngModel)]="id" name="id" readonly>
            </mat-form-field>
            <mat-form-field appearance="fill" >
                <mat-label>Release date [ This is when your study will be made public. ] </mat-label>
                <input matInput [matDatepicker]="picker" required [(ngModel)]="releaseDate" [min]="today" [max]="maxDate" name="releaseDate">
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>    
            <mat-form-field  class="app-field-padding">
                <input  matInput placeholder="Study Name" [(ngModel)]="studyName" name="studyName">
            </mat-form-field>     
            <!-- <mat-checkbox matInput name="provideGenomeAnnotation" [(ngModel)]="provideGenomeAnnotation" >Will you provide functional genome annotation</mat-checkbox> -->
          </div>
          <div class="column" *ngIf="!editMode">
            <mat-form-field  class="app-field-padding">
                <input  matInput placeholder="Short descriptive study title" required [(ngModel)]="studyTitle" name="studyTitle">
            </mat-form-field>
            <mat-form-field  class="app-field-padding">
                <input  matInput placeholder="Detailed study abstract" required [(ngModel)]="description" name="description">
            </mat-form-field>
          </div>
          
        </div>
    </mat-card>
  
    <mat-card class="mat-body">
      <mat-card-subtitle>PubMed Registration</mat-card-subtitle>
      <a (click)="addPubMed()">Add PubMed <mat-icon>add_circle</mat-icon></a>
      <div *ngIf="showPubMedSearch">
        <mat-form-field  class="app-field-padding">
            <input matInput placeholder="Search PubMedId" [matAutocomplete]="auto" name="pubMedSearch" #pubMedSearchVal="ngModel" [(ngModel)]="pubMedSearch" (ngModelChange)="getPubMed(pubMedSearch)">
        </mat-form-field>
        <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selectedPubMed($event)"  [displayWith]="getPubMedDisplayText">
            <mat-option *ngFor="let pubMed of pubMedArray" [value]="pubMed">
            {{pubMed.id}} [ {{pubMed.title}} ]
            </mat-option>
        </mat-autocomplete>
      </div>  
       <table mat-table *ngIf="dataSource" #table [dataSource]="dataSource" class="mat-elevation-z8">
  
        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef> PubMedId </th>
          <td mat-cell *matCellDef="let element"> {{element.id}} </td>
        </ng-container>
  
        <ng-container matColumnDef="title">
          <th mat-header-cell *matHeaderCellDef> Title </th>
          <td mat-cell *matCellDef="let element"> {{element.title}} </td>
        </ng-container>
  
        
        <ng-container matColumnDef="remove">
          <th mat-header-cell *matHeaderCellDef> Remove </th>
          <td mat-cell *matCellDef="let element"> 
            <mat-icon (click)="removePubMed(element)">delete</mat-icon>
          </td>
        </ng-container>
  
        
  
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
      
      <mat-error *ngIf="mainContact <= 0 ">
        Please enter atlease one primary contact to save the account.
     </mat-error>
    </mat-card>
   </div>
  
  
   <div style="text-align:Center">
    <button mat-raised-button color="accent" [disabled]="f.invalid || mainContact <= 0">Save</button>
    <button mat-raised-button style="margin-left: 5px;" routerLink="">Cancel</button>
  </div>
  </form>  
  </div>
  