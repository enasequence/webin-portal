<div *ngIf="active" style="height:70px;">
    <mat-spinner [diameter]="50" [strokeWidth]="5" style="margin:0 auto;">
    </mat-spinner>
</div>

<div *ngIf="resultError">
  <div class="app-error">
      <i class="material-icons">error</i>
      {{resultError}}
  </div>
</div>

<div *ngIf="isResult()">

  <!-- Show success or failure message -->

  <div *ngIf="webinErrorDataSource">
    <div class="app-error">
        <i class="material-icons">error</i>
        Submission failed.
    </div>
  </div>
  <div *ngIf="webinAccessionDataSource">
    <div class="app-success">
        <i class="material-icons">done</i>
        The submission was successful.
    </div>
  </div>

</div>

<div *ngIf="showReceipt()">

  <!-- Show receipt -->

  <div class="container"
       fxLayout
       fxLayout.xs="column"
       fxLayoutAlign="space-around start"
       fxLayoutGap="10px">
    <div>
        <mat-checkbox [(ngModel)]="showReceiptXml">
          Show receipt XML
        </mat-checkbox>
    </div>
    <div fxFlex>
   </div>

   <div *ngIf="webinErrorDataSource">
     <button mat-raised-button color="accent" (click)="downloadErrorTable()">
       Download errors
     </button>
   </div>

   <div *ngIf="webinAccessionDataSource">
     <button mat-raised-button color="accent" (click)="downloadAccessionTable()">
       Download accessions
     </button>
   </div>

    <div>
      <button mat-raised-button color="accent" (click)="downloadReceiptXml()">
        Download receipt XML
      </button>
    </div>
  </div>

  <!-- Show errors -->

  <div *ngIf="webinErrorDataSource">

    <div *ngIf="!showReceiptXml" class="app-table-container">

      <mat-table #webinErrorTable [dataSource]="webinErrorDataSource" >

        <ng-container matColumnDef="error">
          <mat-header-cell *matHeaderCellDef><span class="app-table-header">Error message</span></mat-header-cell>
          <mat-cell *matCellDef="let element">{{element.error}}</mat-cell>
        </ng-container>
        <mat-header-row *matHeaderRowDef="webinErrorTableColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: webinErrorTableColumns;"></mat-row>

      </mat-table>

    </div>

    <div *ngIf="showReceiptXml">
      <div class="app-receipt app-table-container">
        <pre>{{result.xml}}</pre>
      </div>
    </div>

  </div> <!-- <div *ngIf="webinErrorDataSource"> -->

  <!-- Show accessions -->

  <div *ngIf="webinAccessionDataSource">

    <div *ngIf="!showReceiptXml" class="app-table-container">

      <mat-table #webinAccessionTable [dataSource]="webinAccessionDataSource" >

        <ng-container matColumnDef="type">
          <mat-header-cell *matHeaderCellDef><span class="app-table-header">Type</span></mat-header-cell>
          <mat-cell *matCellDef="let element">{{humanReadableFormat(element.type)}}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="accession">
          <mat-header-cell *matHeaderCellDef><span class="app-table-header">Accession</span></mat-header-cell>
          <mat-cell *matCellDef="let element">{{element.accession}}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="alias">
          <mat-header-cell *matHeaderCellDef><span class="app-table-header">Unique name (alias)</span></mat-header-cell>
          <mat-cell *matCellDef="let element">{{element.alias}}</mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="webinAccessionTableColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: webinAccessionTableColumns;"></mat-row>

      </mat-table>

    </div>

    <div *ngIf="showReceiptXml">
      <div class="app-receipt app-table-container">
        <pre>{{result.xml}}</pre>
      </div>
    </div>

  </div> <!-- <div *ngIf="webinErrorDataSource"> -->

  <div [hidden]="!webinErrorDataSource">
    <!-- the paginator must be created before the dataSource has been defined -->
    <div *ngIf="!showReceiptXml">

      <mat-paginator #webinErrorPaginator
                     [pageSize]="10"
                     [pageSizeOptions]="[10, 25, 50]">
      </mat-paginator>

    </div>

  </div>

  <div [hidden]="!webinAccessionDataSource">
    <!-- the paginator must be created before the dataSource has been defined -->    
    <mat-paginator #webinAccessionPaginator
                   [pageSize]="10"
                   [pageSizeOptions]="[10, 25, 50]">
    </mat-paginator>

  </div>

</div> <!-- <div *ngIf="showReceipt()"> -->
