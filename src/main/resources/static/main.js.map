{"version":3,"sources":["webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/app.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/checklist-type.enum.ts","webpack:///./src/app/checklist/checklist.component.css","webpack:///./src/app/checklist/checklist.component.html","webpack:///./src/app/checklist/checklist.component.ts","webpack:///./src/app/dashboard/dashboard.component.css","webpack:///./src/app/dashboard/dashboard.component.html","webpack:///./src/app/dashboard/dashboard.component.ts","webpack:///./src/app/footer/footer.component.css","webpack:///./src/app/footer/footer.component.html","webpack:///./src/app/footer/footer.component.ts","webpack:///./src/app/gdpr/gdpr.component.css","webpack:///./src/app/gdpr/gdpr.component.html","webpack:///./src/app/gdpr/gdpr.component.ts","webpack:///./src/app/header/header.component.css","webpack:///./src/app/header/header.component.html","webpack:///./src/app/header/header.component.ts","webpack:///./src/app/login/login.component.css","webpack:///./src/app/login/login.component.html","webpack:///./src/app/login/login.component.ts","webpack:///./src/app/logout/logout.component.css","webpack:///./src/app/logout/logout.component.html","webpack:///./src/app/logout/logout.component.ts","webpack:///./src/app/report-action-type.enum.ts","webpack:///./src/app/report-action/report-action.component.css","webpack:///./src/app/report-action/report-action.component.html","webpack:///./src/app/report-action/report-action.component.ts","webpack:///./src/app/report-edit-dialog/report-edit-dialog.component.css","webpack:///./src/app/report-edit-dialog/report-edit-dialog.component.html","webpack:///./src/app/report-edit-dialog/report-edit-dialog.component.ts","webpack:///./src/app/report-type.enum.ts","webpack:///./src/app/report/report.component.css","webpack:///./src/app/report/report.component.html","webpack:///./src/app/report/report.component.ts","webpack:///./src/app/submission-result-dialog/submission-result-dialog.component.css","webpack:///./src/app/submission-result-dialog/submission-result-dialog.component.html","webpack:///./src/app/submission-result-dialog/submission-result-dialog.component.ts","webpack:///./src/app/submission-result/submission-result.component.css","webpack:///./src/app/submission-result/submission-result.component.html","webpack:///./src/app/submission-result/submission-result.component.ts","webpack:///./src/app/submit/submit.component.css","webpack:///./src/app/submit/submit.component.html","webpack:///./src/app/submit/submit.component.ts","webpack:///./src/app/ui/ui.module.ts","webpack:///./src/app/webin-authentication-guard.service.ts","webpack:///./src/app/webin-authentication.interceptor.ts","webpack:///./src/app/webin-authentication.service.ts","webpack:///./src/app/webin-gdpr-guard.service.ts","webpack:///./src/app/webin-gdpr.service.ts","webpack:///./src/app/webin-report.service.ts","webpack:///./src/app/webin-rest.service.ts","webpack:///./src/app/webin-xml-report.service.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQuY3NzIn0= */\"","module.exports = \"<router-outlet></router-outlet>\\r\\n\"","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\n\r\nimport { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent {\r\n  title = 'Webin';\r\n}\r\n","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\nimport { NgModule } from '@angular/core';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\n\r\nimport { UiModule } from './ui/ui.module';\r\n\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { HTTP_INTERCEPTORS } from '@angular/common/http';\r\n\r\nimport { AppComponent } from './app.component';\r\nimport { LoginComponent } from './login/login.component';\r\nimport { LogoutComponent } from './logout/logout.component';\r\nimport { HeaderComponent } from './header/header.component';\r\nimport { FooterComponent } from './footer/footer.component';\r\nimport { DashboardComponent } from './dashboard/dashboard.component';\r\nimport { SubmitComponent } from './submit/submit.component';\r\nimport { SubmissionResultComponent } from './submission-result/submission-result.component';\r\nimport { SubmissionResultDialogComponent } from './submission-result-dialog/submission-result-dialog.component';\r\nimport { ReportComponent } from './report/report.component';\r\nimport { ReportActionComponent } from './report-action/report-action.component';\r\nimport { ReportEditDialogComponent } from './report-edit-dialog/report-edit-dialog.component';\r\nimport { GdprComponent } from './gdpr/gdpr.component';\r\nimport { ChecklistComponent } from './checklist/checklist.component';\r\n\r\nimport { WebinRestService } from './webin-rest.service';\r\nimport { WebinReportService } from './webin-report.service';\r\nimport { WebinXmlReportService } from './webin-xml-report.service';\r\nimport { WebinAuthenticationService } from './webin-authentication.service';\r\nimport { WebinGdprService } from './webin-gdpr.service';\r\nimport { WebinAuthenticationGuardService } from './webin-authentication-guard.service';\r\nimport { WebinGdprGuardService } from './webin-gdpr-guard.service';\r\n\r\nimport { WebinAuthenticationInterceptor } from './webin-authentication.interceptor';\r\n\r\nimport { RouterModule, Routes } from '@angular/router';\r\n\r\nconst appRoutes: Routes = [\r\n  {\r\n    path: 'login',\r\n    component: LoginComponent,\r\n  },\r\n  {\r\n    path: 'logout',\r\n    component: LogoutComponent,\r\n  },\r\n  {\r\n    path: 'sample-checklist',\r\n    component: ChecklistComponent,\r\n    data: { checklistType: 'sample' }\r\n  },\r\n  {\r\n    path: 'sequence-checklist',\r\n    component: ChecklistComponent,\r\n    data: { checklistType: 'sequence' }\r\n  },\r\n  {\r\n    path: 'consent',\r\n    component: GdprComponent,\r\n    canActivate: [WebinAuthenticationGuardService],\r\n  },\r\n  {\r\n    path: '**',\r\n    component: DashboardComponent,\r\n    canActivate: [WebinAuthenticationGuardService, WebinGdprGuardService],\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    BrowserModule,\r\n    UiModule,\r\n    HttpClientModule,\r\n    // Router\r\n    RouterModule.forRoot(\r\n      appRoutes,\r\n      { enableTracing: false } // <-- debugging purposes only\r\n    ),\r\n  ],\r\n  declarations: [\r\n    AppComponent,\r\n    SubmitComponent,\r\n    SubmissionResultComponent,\r\n    SubmissionResultDialogComponent,\r\n    LoginComponent,\r\n    LogoutComponent,\r\n    DashboardComponent,\r\n    HeaderComponent,\r\n    FooterComponent,\r\n    ReportComponent,\r\n    ReportEditDialogComponent,\r\n    ReportActionComponent,\r\n    GdprComponent,\r\n    ChecklistComponent,\r\n  ],\r\n  bootstrap: [\r\n    AppComponent,\r\n    HeaderComponent,\r\n    FooterComponent,\r\n  ],\r\n  providers: [\r\n    WebinRestService,\r\n    WebinReportService,\r\n    WebinXmlReportService,\r\n    WebinAuthenticationService,\r\n    WebinGdprService,\r\n    WebinAuthenticationGuardService,\r\n    WebinGdprGuardService,\r\n\r\n    {\r\n      provide: HTTP_INTERCEPTORS,\r\n      useClass: WebinAuthenticationInterceptor,\r\n      multi: true,\r\n    }\r\n  ],\r\n  entryComponents: [\r\n    ReportEditDialogComponent,\r\n    SubmissionResultDialogComponent,\r\n  ]\r\n})\r\nexport class AppModule { }\r\n","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\n\r\nexport enum ChecklistType {\r\n  sample = 'sample',\r\n  sequence = 'sequence'\r\n}\r\n","module.exports = \".checklist-restriction {\\r\\n  color: black;\\r\\n  background-color:\\t#F5F5F5;\\r\\n}\\r\\n\\r\\n/* Checklist field selection checkbox always green and text always black. */\\r\\n\\r\\n.checklist-checked-field {\\r\\n  color: black;\\r\\n}\\r\\n\\r\\n.mat-checkbox-checked.mat-accent .mat-checkbox-background, .mat-checkbox-indeterminate.mat-accent .mat-checkbox-background {\\r\\n  background-color: #38983e !important;\\r\\n}\\r\\n\\r\\n.mat-ripple-element {\\r\\n  background: #38983e !important;\\r\\n}\\r\\n\\r\\n.mat-expansion-panel-header,\\r\\n.mat-expansion-panel-body {\\r\\n  padding-top: 0px;\\r\\n  padding-right: 5px;\\r\\n  padding-bottom: 5px;\\r\\n  padding-left: 5px;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY2hlY2tsaXN0L2NoZWNrbGlzdC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsWUFBWTtFQUNaLHlCQUF5QjtBQUMzQjs7QUFFQSwyRUFBMkU7O0FBRTNFO0VBQ0UsWUFBWTtBQUNkOztBQUVBO0VBQ0Usb0NBQW9DO0FBQ3RDOztBQUVBO0VBQ0UsOEJBQThCO0FBQ2hDOztBQUVBOztFQUVFLGdCQUFnQjtFQUNoQixrQkFBa0I7RUFDbEIsbUJBQW1CO0VBQ25CLGlCQUFpQjtBQUNuQiIsImZpbGUiOiJzcmMvYXBwL2NoZWNrbGlzdC9jaGVja2xpc3QuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jaGVja2xpc3QtcmVzdHJpY3Rpb24ge1xyXG4gIGNvbG9yOiBibGFjaztcclxuICBiYWNrZ3JvdW5kLWNvbG9yOlx0I0Y1RjVGNTtcclxufVxyXG5cclxuLyogQ2hlY2tsaXN0IGZpZWxkIHNlbGVjdGlvbiBjaGVja2JveCBhbHdheXMgZ3JlZW4gYW5kIHRleHQgYWx3YXlzIGJsYWNrLiAqL1xyXG5cclxuLmNoZWNrbGlzdC1jaGVja2VkLWZpZWxkIHtcclxuICBjb2xvcjogYmxhY2s7XHJcbn1cclxuXHJcbi5tYXQtY2hlY2tib3gtY2hlY2tlZC5tYXQtYWNjZW50IC5tYXQtY2hlY2tib3gtYmFja2dyb3VuZCwgLm1hdC1jaGVja2JveC1pbmRldGVybWluYXRlLm1hdC1hY2NlbnQgLm1hdC1jaGVja2JveC1iYWNrZ3JvdW5kIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzg5ODNlICFpbXBvcnRhbnQ7XHJcbn1cclxuXHJcbi5tYXQtcmlwcGxlLWVsZW1lbnQge1xyXG4gIGJhY2tncm91bmQ6ICMzODk4M2UgIWltcG9ydGFudDtcclxufVxyXG5cclxuLm1hdC1leHBhbnNpb24tcGFuZWwtaGVhZGVyLFxyXG4ubWF0LWV4cGFuc2lvbi1wYW5lbC1ib2R5IHtcclxuICBwYWRkaW5nLXRvcDogMHB4O1xyXG4gIHBhZGRpbmctcmlnaHQ6IDVweDtcclxuICBwYWRkaW5nLWJvdHRvbTogNXB4O1xyXG4gIHBhZGRpbmctbGVmdDogNXB4O1xyXG59XHJcbiJdfQ== */\"","module.exports = \"<mat-expansion-panel [expanded]=\\\"init\\\">\\r\\n  <mat-expansion-panel-header>\\r\\n    <mat-panel-title>\\r\\n      <b>Download spreadsheet template for annotated sequences</b>\\r\\n    </mat-panel-title>\\r\\n  </mat-expansion-panel-header>\\r\\n\\r\\n  <div *ngIf=\\\"!checklistGroupDataSource && !init\\\">\\r\\n\\r\\n    <p *ngIf=\\\"checklistType === ChecklistType.sample\\\">\\r\\n      Use this submission option to create and download a spreadsheet template for samples.\\r\\n    </p>\\r\\n\\r\\n    <p *ngIf=\\\"checklistType === ChecklistType.sequence\\\">\\r\\n      Use this submission option to create and download a spreadsheet template for sequences.\\r\\n    </p>\\r\\n\\r\\n    <button mat-raised-button color=\\\"accent\\\" (click)=\\\"initChecklists()\\\">Start</button>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"checklistGroupDataSource\\\">\\r\\n\\r\\n    <p *ngIf=\\\"checklistType === ChecklistType.sample\\\">\\r\\n      Please select the most appropriate checklist group, checklist and checklist fields.\\r\\n      Download an empty spreadsheet template, fill in the spreadsheet and submit the spreadsheet\\r\\n      using Webin.\\r\\n    </p>\\r\\n\\r\\n    <p *ngIf=\\\"checklistType === ChecklistType.sequence\\\">\\r\\n      Please select the most appropriate checklist group, checklist and checklist fields.\\r\\n      Download an empty spreadsheet template, Fill in the spreadsheet\\r\\n      and submit the spreadsheet using\\r\\n      <a href=\\\"https://ena-docs.readthedocs.io/en/latest/sequence/webin-cli-spreadsheet.html\\\" target=\\\"_blank\\\">Webin command line interface</a>.\\r\\n    </p>\\r\\n\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"active\\\" style=\\\"height:70px;\\\">\\r\\n    <mat-spinner [diameter]=\\\"50\\\" [strokeWidth]=\\\"5\\\" style=\\\"margin:0 auto;\\\">\\r\\n    </mat-spinner>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"dataError\\\">\\r\\n    <div class=\\\"app-error\\\">\\r\\n      <i class=\\\"material-icons\\\">error</i>\\r\\n      {{dataError}}\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <mat-vertical-stepper #stepper *ngIf=\\\"checklistGroupDataSource\\\">\\r\\n    <mat-step label=\\\"Select checklist group\\\">\\r\\n      <p>Please select a checklist group first.</p>\\r\\n\\r\\n      <div class=\\\"mat-elevation-z8\\\">\\r\\n        <mat-table [dataSource]=\\\"checklistGroupDataSource\\\">\\r\\n          <ng-container matColumnDef=\\\"name\\\">\\r\\n            <mat-header-cell *matHeaderCellDef>Name</mat-header-cell>\\r\\n            <mat-cell *matCellDef=\\\"let checklistGroup\\\">\\r\\n              <p style=\\\"font-weight:bold;\\\"> {{ checklistGroup.name }} </p>\\r\\n              <p style=\\\"margin-left:10px;\\\"> {{ checklistGroup.description }} </p>\\r\\n            </mat-cell>\\r\\n          </ng-container>\\r\\n\\r\\n          <mat-row *matRowDef=\\\"let row; columns: checklistGroupDisplayedColumns;\\\"\\r\\n            (click)=\\\"setChecklistGroup(row, stepper)\\\"></mat-row>\\r\\n        </mat-table>\\r\\n      </div>\\r\\n\\r\\n      <div>\\r\\n        <button mat-button matStepperPrevious>Back</button>\\r\\n        <button mat-button matStepperNext [disabled]=\\\"!this.selectedChecklistGroup\\\">Next</button>\\r\\n      </div>\\r\\n\\r\\n    </mat-step>\\r\\n    <mat-step label=\\\"Select checklist\\\">\\r\\n      <div *ngIf=\\\"!selectedChecklistGroup\\\">\\r\\n        <p>Please select a checklist group first.</p>\\r\\n      </div>\\r\\n\\r\\n      <div *ngIf=\\\"selectedChecklistGroup\\\">\\r\\n        <p>You have selected <b>{{selectedChecklistGroup.name}}</b>. Please select the most appropriate checklist from\\r\\n          the list below.</p>\\r\\n        <div class=\\\"mat-elevation-z8\\\">\\r\\n          <table cdk-table [dataSource]=\\\"checklistDataSource\\\">\\r\\n\\r\\n            <ng-container cdkColumnDef=\\\"name\\\">\\r\\n              <th cdk-header-cell *cdkHeaderCellDef>Name</th>\\r\\n              <td cdk-cell *cdkCellDef=\\\"let checklist\\\">\\r\\n                <p style=\\\"font-weight:bold\\\">{{ checklist.name }}</p>\\r\\n                <p>{{ checklist.description }}</p>\\r\\n              </td>\\r\\n            </ng-container>\\r\\n\\r\\n            <tr cdk-row *cdkRowDef=\\\"let row; columns: checklistDisplayedColumns;\\\" (click)=\\\"setChecklist(row, stepper)\\\">\\r\\n            </tr>\\r\\n          </table>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div>\\r\\n        <button mat-button matStepperPrevious>Back</button>\\r\\n        <button mat-button matStepperNext [disabled]=\\\"!this.selectedChecklist\\\">Next</button>\\r\\n      </div>\\r\\n\\r\\n    </mat-step>\\r\\n    <mat-step label=\\\"Select checklist fields\\\">\\r\\n      <div *ngIf=\\\"!selectedChecklist\\\">\\r\\n        <p>Please select a checklist first.</p>\\r\\n      </div>\\r\\n\\r\\n      <div *ngIf=\\\"selectedChecklist\\\">\\r\\n        <p>You have selected <b>{{selectedChecklist.name}}</b>. Please select the checklist fields below.</p>\\r\\n\\r\\n        <div class=\\\"mat-elevation-z8\\\">\\r\\n          <mat-accordion>\\r\\n            <mat-expansion-panel *ngFor=\\\"let fieldGroup of selectedChecklist.fieldGroups\\\">\\r\\n              <mat-expansion-panel-header>\\r\\n                <mat-panel-title>\\r\\n                  {{fieldGroup.name}}<span fxHide fxShow.gt-sm> {{getSelectedFieldsDisplayText(fieldGroup)}}</span>\\r\\n                </mat-panel-title>\\r\\n              </mat-expansion-panel-header>\\r\\n\\r\\n              <div *ngFor=\\\"let field of fieldGroup.fields\\\">\\r\\n                <mat-checkbox class=\\\"checklist-checked-field\\\" [(ngModel)]=\\\"selectedFields[field.label]\\\"\\r\\n                  [disabled]=\\\"mandatoryFields[field.label]\\\"><b class=\\\"checklist-checked-field\\\">{{field.label}}</b>\\r\\n                </mat-checkbox>\\r\\n                <p fxHide fxShow.gt-sm><i>{{field.mandatory}} {{getFieldTypeDisplayText(field)}}</i></p>\\r\\n                <!--\\r\\n            <p *ngIf=\\\"checklistType === ChecklistType.sequence\\\">\\r\\n              {{field.name}}\\r\\n            </p>\\r\\n            -->\\r\\n                <p>\\r\\n                  {{field.description}}\\r\\n                </p>\\r\\n                <div fxLayout=\\\"row\\\">\\r\\n                  <div fxFlex=\\\"200px\\\">\\r\\n                    <p *ngIf=\\\"field.units.length > 0\\\">\\r\\n                      <mat-select class=\\\"checklist-restriction\\\" placeholder=\\\"Permitted units\\\">\\r\\n                        <mat-option *ngFor=\\\"let unit of field.units\\\" [value]=\\\"unit\\\" disabled>\\r\\n                          {{ unit }}\\r\\n                        </mat-option>\\r\\n                      </mat-select>\\r\\n                    </p>\\r\\n                    <p *ngIf=\\\"field.regexValue\\\" class=\\\"checklist-restriction\\\">\\r\\n                      <mat-select class=\\\"checklist-restriction\\\" placeholder=\\\"Regular expression\\\">\\r\\n                        <mat-option disabled>\\r\\n                          {{ field.regexValue }}\\r\\n                        </mat-option>\\r\\n                      </mat-select>\\r\\n                    </p>\\r\\n                    <p *ngIf=\\\"field.textChoice && field.textChoice.length > 0\\\">\\r\\n                      <mat-select class=\\\"checklist-restriction\\\" placeholder=\\\"Permitted values\\\">\\r\\n                        <mat-option *ngFor=\\\"let textChoice of field.textChoice\\\" [value]=\\\"textChoice\\\" disabled>\\r\\n                          {{ textChoice }}\\r\\n                        </mat-option>\\r\\n                      </mat-select>\\r\\n                    </p>\\r\\n                    <p *ngIf=\\\"field.ontologyId\\\" class=\\\"checklist-restriction\\\">\\r\\n                      Permitted ontology: {{ field.ontologyId }}\\r\\n                    </p>\\r\\n                  </div>\\r\\n                  <div fxFlex>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </div>\\r\\n            </mat-expansion-panel>\\r\\n          </mat-accordion>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div>\\r\\n        <button mat-button matStepperPrevious>Back</button>\\r\\n        <button mat-button matStepperNext>Next</button>\\r\\n      </div>\\r\\n    </mat-step>\\r\\n    <mat-step label=\\\"Download spreadsheet template\\\">\\r\\n      <div *ngIf=\\\"!selectedChecklist\\\">\\r\\n        <p>Please select a checklist first.</p>\\r\\n      </div>\\r\\n\\r\\n      <div *ngIf=\\\"selectedChecklist\\\">\\r\\n\\r\\n        <p>\\r\\n          Please download the spreadsheet template containing the fields you have selected by using the 'Download'\\r\\n          button below.\\r\\n        </p>\\r\\n\\r\\n        <div *ngIf=\\\"checklistType === ChecklistType.sequence\\\">\\r\\n          <p>\\r\\n            Please do not modify the first two lines of the spreadsheet. The first line contains the checklist name and\\r\\n            the second line contains the field names in separate columns. The first column in the spreadsheet,\\r\\n            the ENTRYNUMBER, starts with 1 and is incremented by 1 for each sequence. For example, if the spreadsheet\\r\\n            has 10 sequences the first ENTRYNUMBER should be 1 and the last should be 10. The other columns in the\\r\\n            spreadsheet correspond to the checklist fields you have selected. You can find more information about\\r\\n            permitted values for each column from the 'Select checklist fields' page.\\r\\n          </p>\\r\\n\\r\\n        </div>\\r\\n\\r\\n        <button mat-raised-button color=\\\"accent\\\" (click)=\\\"download()\\\">Download</button>\\r\\n\\r\\n      </div>\\r\\n\\r\\n      <div>\\r\\n        <button mat-button matStepperPrevious>Back</button>\\r\\n        <!-- <button mat-button matStepperNext (click)=\\\"\\\">Done</button> -->\\r\\n      </div>\\r\\n\\r\\n    </mat-step>\\r\\n  </mat-vertical-stepper>\\r\\n</mat-expansion-panel>\\r\\n\"","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\n\r\nimport { Component, Input, ViewEncapsulation, OnInit } from '@angular/core';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { MatTableDataSource } from '@angular/material';\r\nimport { saveAs } from 'file-saver';\r\nimport { retry, mergeMap, map } from 'rxjs/operators';\r\nimport { ChecklistType } from '../checklist-type.enum';\r\nimport { ChecklistInterface } from '../checklist.interface';\r\nimport { ChecklistGroupInterface } from '../checklist-group.interface';\r\nimport { ChecklistFieldGroupInterface } from '../checklist-field-group.interface';\r\nimport { ChecklistFieldInterface } from '../checklist-field.interface';\r\nimport { WebinAuthenticationService } from '../webin-authentication.service';\r\nimport { WebinReportService } from '../webin-report.service';\r\nimport { ActivatedRoute } from '@angular/router';\r\n\r\ninterface BooleanFieldInterface {\r\n  [key: string]: boolean;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-checklist',\r\n  templateUrl: './checklist.component.html',\r\n  styleUrls: ['./checklist.component.css'],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class ChecklistComponent implements OnInit {\r\n  @Input() checklistType: ChecklistType;\r\n  @Input() init = true;\r\n\r\n  ChecklistType = ChecklistType;   // Allows use in template\r\n\r\n  private _checklistGroups: Array<ChecklistGroupInterface>;\r\n  private _xmlDoc: Document;\r\n  checklistGroupDisplayedColumns = ['name'];\r\n  checklistGroupDataSource: MatTableDataSource<ChecklistGroupInterface>;\r\n  checklistDataSource: MatTableDataSource<ChecklistInterface>;\r\n  checklistDisplayedColumns = ['name'];\r\n  selectedChecklistGroup: ChecklistGroupInterface;\r\n  selectedChecklist: ChecklistInterface;\r\n  selectedFields: BooleanFieldInterface;\r\n  mandatoryFields: BooleanFieldInterface;\r\n  active: boolean;\r\n  dataError: string;\r\n\r\n  constructor(\r\n    private _webinAuthenticationService: WebinAuthenticationService,\r\n    private _webinReportService: WebinReportService,\r\n    private _route: ActivatedRoute) {\r\n    if (_route) {\r\n      switch (_route.snapshot.data.checklistType) {\r\n        case 'sample': {\r\n          this.checklistType = ChecklistType.sample;\r\n          break;\r\n        }\r\n        case 'sequence': {\r\n          this.checklistType = ChecklistType.sequence;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.init) {\r\n      this.initChecklists();\r\n    }\r\n  }\r\n\r\n  // field group restriction type (not supported for spreadsheets)\r\n  // -----------------------------\r\n  // Any number or none of the fields\r\n  // One of the fields\r\n  // At least one of the fields\r\n  // One or none of the fields\r\n  //\r\n  // field type\r\n  // -----------------------------\r\n  // TEXT_FIELD\r\n  // TEXT_AREA_FIELD\r\n  // TEXT_CHOICE_FIELD\r\n  // DATE_FIELD\r\n  // TAXON_FIELD\r\n  // ONTOLOGY_FIELD\r\n  //\r\n  // field mandatory\r\n  // -----------------------------\r\n  // mandatory\r\n  // recommended\r\n  // optional\r\n  //\r\n  // field multiplicity (not supported for spreadsheets)\r\n  // -----------------------------\r\n  // single\r\n  // multiple\r\n\r\n  getFieldTypeDisplayText(field: ChecklistFieldInterface): string {\r\n    switch (field.type) {\r\n      case 'TEXT_FIELD':\r\n      case 'TEXT_AREA_FIELD':\r\n      case 'TEXT_CHOICE_FIELD': {\r\n        return 'text field';\r\n      }\r\n      case 'DATE_FIELD': {\r\n        return 'date field';\r\n      }\r\n      case 'TAXON_FIELD': {\r\n        return 'taxon field';\r\n      }\r\n      case 'ONTOLOGY_FIELD': {\r\n        return 'ontology field';\r\n      }\r\n      default: {\r\n        return 'field';\r\n      }\r\n    }\r\n  }\r\n\r\n  getSelectedFieldsDisplayText(fieldGroup: ChecklistFieldGroupInterface): string {\r\n    let cnt = 0;\r\n    fieldGroup.fields.forEach((field) => {\r\n      if (this.selectedFields[field.label]) {\r\n        cnt++;\r\n      }\r\n    });\r\n    return '(' + cnt + ' of ' + fieldGroup.fields.length + ' fields selected)';\r\n  }\r\n\r\n  setChecklistGroup(checklistGroup: ChecklistGroupInterface, stepper): void {\r\n    this.selectedChecklistGroup = checklistGroup;\r\n    this.checklistDataSource = new MatTableDataSource<ChecklistInterface>(this.selectedChecklistGroup.checklists);\r\n    stepper.next();\r\n  }\r\n\r\n  setChecklist(checklist: ChecklistInterface, stepper): void {\r\n    this.selectedChecklist = checklist;\r\n    this.selectedFields = {};\r\n    this.mandatoryFields = {};\r\n    this.selectedChecklist.fieldGroups.forEach((fieldGroup) => {\r\n      fieldGroup.fields.forEach((field) => {\r\n        this.selectedFields[field.label] = (field.mandatory === 'mandatory');\r\n        this.mandatoryFields[field.label] = (field.mandatory === 'mandatory');\r\n      });\r\n    });\r\n    stepper.next();\r\n  }\r\n\r\n  getXmlTextValue(xmlDoc, xpath: string): string {\r\n    return this._xmlDoc.evaluate(xpath, xmlDoc, null, XPathResult.STRING_TYPE, null).stringValue;\r\n  }\r\n\r\n  getXmlNodes(xmlDoc, xpath: string) {\r\n    return this._xmlDoc.evaluate(xpath, xmlDoc, null, XPathResult.ORDERED_NODE_ITERATOR_TYPE, null);\r\n  }\r\n\r\n  getChecklistTypeParamValue(): string {\r\n    switch (this.checklistType) {\r\n      case ChecklistType.sample:\r\n        return 'sample';\r\n      case ChecklistType.sequence:\r\n        return 'sequence';\r\n    }\r\n  }\r\n\r\n  initChecklists(): void {\r\n    // console.log(' ** initChecklists **');\r\n\r\n    this.active = true;\r\n    this.dataError = undefined;\r\n    this._checklistGroups = new Array<ChecklistGroupInterface>();\r\n\r\n    const checklistGroups = this._webinReportService.getChecklistGroups(this.getChecklistTypeParamValue());\r\n    if (!checklistGroups) {\r\n      return;\r\n    }\r\n\r\n    checklistGroups.\r\n      pipe(\r\n        retry(3),\r\n        mergeMap(data => {\r\n          this.setChecklistGroups(data);\r\n          return this._webinReportService.getChecklistXmls(this.getChecklistTypeParamValue());\r\n        })\r\n      ).\r\n      subscribe(\r\n        data => {\r\n          this.setChecklistXmls(data);\r\n        }\r\n        ,\r\n        (err: HttpErrorResponse) => {\r\n          console.log('** Webin checklist service failed **', err);\r\n          this.dataError = 'Webin checklist service failed. Please try again later. If the problem persists please contact the helpdesk.';\r\n        },\r\n        () => {\r\n          this.active = false;\r\n        }\r\n      );\r\n  }\r\n\r\n  private setChecklistGroups(data): void {\r\n    // console.log('** checklistGroupData **', data);\r\n\r\n    data.forEach((checklistGroupData) => {\r\n      const report = checklistGroupData.report;\r\n      this._checklistGroups.push({\r\n        name: report.name,\r\n        description: report.description,\r\n        checklistIds: report.checklist,\r\n        checklists: new Array<ChecklistInterface>()\r\n      });\r\n    });\r\n  }\r\n\r\n  setChecklistXmls(data): void {\r\n    // console.log('** setChecklistXmls **', data);\r\n    this._xmlDoc = (new DOMParser()).parseFromString(data.body, 'text/xml');\r\n    const checklistNodes = this.getXmlNodes(this._xmlDoc, '/CHECKLIST_SET/CHECKLIST');\r\n\r\n    let checklistNode = checklistNodes.iterateNext();\r\n    while (checklistNode) {\r\n      const checklist: ChecklistInterface = {\r\n        id: this.getXmlTextValue(checklistNode, '@accession'),\r\n        name: this.getXmlTextValue(checklistNode, 'DESCRIPTOR/NAME/text()'),\r\n        description: this.getXmlTextValue(checklistNode, 'DESCRIPTOR/DESCRIPTION/text()'),\r\n        type: this.getXmlTextValue(checklistNode, '@checklistType'),\r\n        fieldGroups: new Array<ChecklistFieldGroupInterface>()\r\n      };\r\n\r\n      const fieldGroupNodes = this.getXmlNodes(checklistNode, 'DESCRIPTOR/FIELD_GROUP');\r\n      let fieldGroupNode = fieldGroupNodes.iterateNext();\r\n      while (fieldGroupNode) {\r\n        const fieldGroup: ChecklistFieldGroupInterface = {\r\n          name: this.getXmlTextValue(fieldGroupNode, 'NAME/text()'),\r\n          fields: new Array<ChecklistFieldInterface>()\r\n        };\r\n\r\n        const fieldNodes = this.getXmlNodes(fieldGroupNode, 'FIELD');\r\n        let fieldNode = fieldNodes.iterateNext();\r\n        while (fieldNode) {\r\n          const field: ChecklistFieldInterface = {\r\n            name: this.getXmlTextValue(fieldNode, 'NAME/text()'),\r\n            label: this.getXmlTextValue(fieldNode, 'LABEL/text()'),\r\n            description: this.getXmlTextValue(fieldNode, 'DESCRIPTION/text()'),\r\n            mandatory: this.getXmlTextValue(fieldNode, 'MANDATORY/text()'),\r\n            type: this.getXmlTextValue(fieldNode, 'name(FIELD_TYPE/*[1])'),\r\n            units: new Array<string>(),\r\n            textChoice: new Array<string>(),\r\n          };\r\n\r\n          // Regex\r\n          //\r\n\r\n          const regexNodes = this.getXmlNodes(fieldNode, 'FIELD_TYPE/*/REGEX_VALUE[1]');\r\n          if (regexNodes) {\r\n            let regexNode = regexNodes.iterateNext();\r\n            while (regexNode) {\r\n              field.regexValue = this.getXmlTextValue(regexNode, 'text()');\r\n              regexNode = regexNodes.iterateNext();\r\n            }\r\n          }\r\n\r\n          // CV\r\n          //\r\n\r\n          const cvNodes = this.getXmlNodes(fieldNode, 'FIELD_TYPE/TEXT_CHOICE_FIELD/TEXT_VALUE/VALUE');\r\n          if (cvNodes) {\r\n            let cvNode = cvNodes.iterateNext();\r\n            while (cvNode) {\r\n              field.textChoice.push(this.getXmlTextValue(cvNode, 'text()'));\r\n              cvNode = cvNodes.iterateNext();\r\n            }\r\n          }\r\n\r\n          // Ontology\r\n          //\r\n\r\n          const ontologyNodes = this.getXmlNodes(fieldNode, 'FIELD_TYPE/ONTOLOGY_FIELD/ONTOLOGY_ID');\r\n          if (ontologyNodes) {\r\n            let ontologyNode = ontologyNodes.iterateNext();\r\n            while (ontologyNode) {\r\n              field.ontologyId = this.getXmlTextValue(ontologyNode, 'text()');\r\n              ontologyNode = ontologyNodes.iterateNext();\r\n            }\r\n          }\r\n\r\n          // Units\r\n          //\r\n\r\n          const unitNodes = this.getXmlNodes(fieldNode, 'UNITS/UNIT');\r\n          if (unitNodes) {\r\n            let unitNode = unitNodes.iterateNext();\r\n            while (unitNode) {\r\n              field.units.push(this.getXmlTextValue(unitNode, 'text()'));\r\n              unitNode = unitNodes.iterateNext();\r\n            }\r\n          }\r\n\r\n          fieldGroup.fields.push(field);\r\n          fieldNode = fieldNodes.iterateNext();\r\n        }\r\n\r\n        checklist.fieldGroups.push(fieldGroup);\r\n        fieldGroupNode = fieldGroupNodes.iterateNext();\r\n      }\r\n\r\n      this._checklistGroups.forEach(checklistGroup => {\r\n        checklistGroup.checklistIds.forEach(id => {\r\n          if (checklist.id === id) {\r\n            checklistGroup.checklists.push(checklist);\r\n          }\r\n        });\r\n      });\r\n\r\n      checklistNode = checklistNodes.iterateNext();\r\n    }\r\n\r\n    // console.log('** Checklists **', this._checklistGroups );\r\n    this.checklistGroupDataSource = new MatTableDataSource<ChecklistGroupInterface>(this._checklistGroups);\r\n  }\r\n\r\n  isEga(): boolean {\r\n    return this._webinAuthenticationService.ega;\r\n  }\r\n\r\n\r\n  getSequenceSpreadsheetText(): string {\r\n    let spreadsheetText = '#template_accession ' + this.selectedChecklist.id + '\\n';\r\n    spreadsheetText += 'ENTRYNUMBER\\t';\r\n\r\n    const { fieldGroups } = this.selectedChecklist;\r\n\r\n    let selectedFieldsCnt = 0;\r\n    fieldGroups.forEach(fieldGroup => {\r\n      fieldGroup.fields.forEach(field => {\r\n        if (this.selectedFields[field.label]) {\r\n          selectedFieldsCnt++;\r\n        }\r\n      });\r\n    });\r\n\r\n    let i = 0;\r\n    fieldGroups.forEach(fieldGroup => {\r\n      fieldGroup.fields.forEach(field => {\r\n        if (this.selectedFields[field.label]) {\r\n          spreadsheetText += field.label;\r\n          if (++i < selectedFieldsCnt) {\r\n            spreadsheetText += '\\t';\r\n          }\r\n        }\r\n      });\r\n    });\r\n\r\n    spreadsheetText += '\\n';\r\n    return spreadsheetText;\r\n  }\r\n\r\n  download() {\r\n\r\n    const dateText = (new Date()).toISOString();\r\n\r\n    const blob = new Blob([this.getSequenceSpreadsheetText()], { type: 'text/plain;charset=utf-8' });\r\n    saveAs(blob, 'Sequence-' + this.selectedChecklist.id + '-' + dateText + '.tsv');\r\n  }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Rhc2hib2FyZC9kYXNoYm9hcmQuY29tcG9uZW50LmNzcyJ9 */\"","module.exports = \"<div>\\r\\n  <mat-tab-group #tabGroup class=\\\"app-dashboard\\\">\\r\\n\\r\\n    <mat-tab label=\\\"Submit\\\">\\r\\n      <app-submit></app-submit>\\r\\n    </mat-tab>\\r\\n    <mat-tab label=\\\"Studies\\\">\\r\\n      <app-report #studies [reportType]=\\\"ReportType.studies\\\" (reportChange)=\\\"consumeReportChange($event)\\\"></app-report>\\r\\n    </mat-tab>\\r\\n    <mat-tab label=\\\"Samples\\\">\\r\\n      <app-report #samples [reportType]=\\\"ReportType.samples\\\" (reportChange)=\\\"consumeReportChange($event)\\\"></app-report>\\r\\n    </mat-tab>\\r\\n    <mat-tab label=\\\"Runs\\\">\\r\\n      <app-report #runs [reportType]=\\\"ReportType.runs\\\" (reportChange)=\\\"consumeReportChange($event)\\\"></app-report>\\r\\n    </mat-tab>\\r\\n    <mat-tab label=\\\"Analyses\\\">\\r\\n      <app-report #analyses [reportType]=\\\"ReportType.analyses\\\" (reportChange)=\\\"consumeReportChange($event)\\\"></app-report>\\r\\n    </mat-tab>\\r\\n\\r\\n    <ng-container *ngIf=\\\"!isEga()\\\">\\r\\n\\r\\n      <mat-tab label=\\\"Run files\\\">\\r\\n        <app-report #runFiles [reportType]=\\\"ReportType.runFiles\\\" (reportChange)=\\\"consumeReportChange($event)\\\"></app-report>\\r\\n      </mat-tab>\\r\\n      <mat-tab label=\\\"Analysis files\\\">\\r\\n        <app-report #analysisFiles [reportType]=\\\"ReportType.analysisFiles\\\" (reportChange)=\\\"consumeReportChange($event)\\\"></app-report>\\r\\n      </mat-tab>\\r\\n      <mat-tab label=\\\"Run process\\\">\\r\\n        <app-report #runProcess [reportType]=\\\"ReportType.runProcess\\\" (reportChange)=\\\"consumeReportChange($event)\\\"></app-report>\\r\\n      </mat-tab>\\r\\n      <mat-tab label=\\\"Analysis process\\\">\\r\\n        <app-report #analysisProcess [reportType]=\\\"ReportType.analysisProcess\\\" (reportChange)=\\\"consumeReportChange($event)\\\"></app-report>\\r\\n      </mat-tab>\\r\\n      <mat-tab label=\\\"Unsubmitted files\\\">\\r\\n        <app-report #unsubmittedFiles [reportType]=\\\"ReportType.unsubmittedFiles\\\" (reportChange)=\\\"consumeReportChange($event)\\\"></app-report>\\r\\n      </mat-tab>\\r\\n\\r\\n    </ng-container>\\r\\n\\r\\n    <ng-container *ngIf=\\\"isEga()\\\">\\r\\n\\r\\n      <mat-tab label=\\\"Dacs\\\">\\r\\n        <app-report #dacs [reportType]=\\\"ReportType.dacs\\\" (reportChange)=\\\"consumeReportChange($event)\\\"></app-report>\\r\\n      </mat-tab>\\r\\n      <mat-tab label=\\\"Policies\\\">\\r\\n        <app-report #policies [reportType]=\\\"ReportType.policies\\\" (reportChange)=\\\"consumeReportChange($event)\\\"></app-report>\\r\\n      </mat-tab>\\r\\n      <mat-tab label=\\\"Datasets\\\">\\r\\n        <app-report #datasets [reportType]=\\\"ReportType.datasets\\\" (reportChange)=\\\"consumeReportChange($event)\\\"></app-report>\\r\\n      </mat-tab>\\r\\n\\r\\n    </ng-container>\\r\\n\\r\\n  </mat-tab-group>\\r\\n</div>\\r\\n\"","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\n\r\nimport { Component, ViewEncapsulation, ViewChild } from '@angular/core';\r\nimport { MatTabGroup } from '@angular/material/tabs';\r\nimport { ReportComponent } from '../report/report.component';\r\nimport { WebinAuthenticationService } from '../webin-authentication.service';\r\nimport { ReportType } from '../report-type.enum';\r\nimport { ReportActionInterface } from '../report-action.interface';\r\n\r\n@Component({\r\n  selector: 'app-main',\r\n  templateUrl: './dashboard.component.html',\r\n  styleUrls: ['./dashboard.component.css'],\r\n  encapsulation: ViewEncapsulation.None,\r\n  providers: [\r\n    ReportComponent\r\n  ]\r\n})\r\nexport class DashboardComponent {\r\n\r\n  ReportType = ReportType;   // Allows use in template\r\n\r\n  @ViewChild('tabGroup') tabGroup: MatTabGroup;\r\n  @ViewChild('studies') studies: ReportComponent;\r\n  @ViewChild('samples') samples: ReportComponent;\r\n  @ViewChild('runs') runs: ReportComponent;\r\n  @ViewChild('analyses') analyses: ReportComponent;\r\n  @ViewChild('runFiles') runFiles: ReportComponent;\r\n  @ViewChild('analysisFiles') analysisFiles: ReportComponent;\r\n  @ViewChild('runProcess') runProcess: ReportComponent;\r\n  @ViewChild('analysisProcess') analysisProcess: ReportComponent;\r\n  @ViewChild('unsubmittedFiles') unsubmittedFiles: ReportComponent;\r\n  @ViewChild('dacs') dacs: ReportComponent;\r\n  @ViewChild('policies') policies: ReportComponent;\r\n  @ViewChild('datasets') datasets: ReportComponent;\r\n\r\n  constructor(\r\n    private _webinAuthenticationService: WebinAuthenticationService) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngOnDestroy() {\r\n  }\r\n\r\n  isEga(): boolean {\r\n    return this._webinAuthenticationService.ega;\r\n  }\r\n\r\n  consumeReportChange(reportAction: ReportActionInterface): void {\r\n    const newTabIndex = this.getTabIndex(reportAction.reportType);\r\n    console.log('** change dashboard report **', reportAction);\r\n    if (newTabIndex) {\r\n      this.tabGroup.selectedIndex = newTabIndex;\r\n      this[reportAction.reportType].id = reportAction.id;\r\n      this[reportAction.reportType].report();\r\n    }\r\n  }\r\n\r\n  getTabIndex(reportType: ReportType) {\r\n    if (this.isEga()) {\r\n      switch (reportType) {\r\n        case ReportType.studies: return 1;\r\n        case ReportType.samples: return 2;\r\n        case ReportType.runs: return 3;\r\n        case ReportType.analyses: return 4;\r\n        case ReportType.dacs: return 5;\r\n        case ReportType.policies: return 6;\r\n        case ReportType.datasets: return 7;\r\n      }\r\n    } else {\r\n      switch (reportType) {\r\n        case ReportType.studies: return 1;\r\n        case ReportType.samples: return 2;\r\n        case ReportType.runs: return 3;\r\n        case ReportType.analyses: return 4;\r\n        case ReportType.runFiles: return 5;\r\n        case ReportType.analysisFiles: return 6;\r\n        case ReportType.runProcess: return 7;\r\n        case ReportType.analysisProcess: return 8;\r\n        case ReportType.unsubmittedFiles: return 9;\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Zvb3Rlci9mb290ZXIuY29tcG9uZW50LmNzcyJ9 */\"","module.exports = \"<div> <!-- fxHide fxShow.gt-xs> <!-- ** Application specific content: fxHide fxShow.gt-xs ** -->\\r\\n  <footer>\\r\\n    <div id=\\\"elixir-banner\\\" data-color=\\\"grey\\\" data-name=\\\"This service\\\" data-description=\\\"\\\" data-more-information-link=\\\"https://www.elixir-europe.org/about-us/who-we-are/nodes/embl-ebi\\\" data-use-basic-styles=\\\"true\\\"></div>\\r\\n    <div id=\\\"global-footer\\\" class=\\\"global-footer\\\">\\r\\n      <nav id=\\\"global-nav-expanded\\\" class=\\\"global-nav-expanded row\\\">\\r\\n        <!-- Footer will be automatically inserted by footer.js -->\\r\\n      </nav>\\r\\n      <section id=\\\"ebi-footer-meta\\\" class=\\\"ebi-footer-meta row\\\">\\r\\n        <!-- Footer meta will be automatically inserted by footer.js -->\\r\\n      </section>\\r\\n    </div>\\r\\n  </footer>\\r\\n\\r\\n  <!-- GDPR banner configuration -->\\r\\n  <div id=\\\"data-protection-message-configuration\\\"\\r\\n    data-message=\\\"This website requires cookies, and the limited processing of your personal data in order to function. By using the site you are agreeing to this as outlined in our &lt;a target='_blank' href='https://www.ebi.ac.uk/data-protection/privacy-notice/ena-submission' class='white-color'&gt;Privacy Notice&lt;/a&gt; and &lt;a target='_blank' href='https://www.ebi.ac.uk/about/terms-of-use' class='white-color'&gt;Terms of Use&lt;/a&gt;.\\\"\\r\\n    data-service-id=\\\"ena-submission\\\" data-data-protection-version=\\\"0.1\\\"></div>\\r\\n\\r\\n</div>\\r\\n\"","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\n\r\nimport { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-footer',\r\n  templateUrl: './footer.component.html',\r\n  styleUrls: ['./footer.component.css']\r\n})\r\nexport class FooterComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","module.exports = \".gdpr-card {\\r\\n  width: 400px;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZ2Rwci9nZHByLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxZQUFZO0FBQ2QiLCJmaWxlIjoic3JjL2FwcC9nZHByL2dkcHIuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5nZHByLWNhcmQge1xyXG4gIHdpZHRoOiA0MDBweDtcclxufVxyXG4iXX0= */\"","module.exports = \"<mat-grid-list cols=\\\"3\\\">\\r\\n  <mat-grid-tile></mat-grid-tile>\\r\\n  <mat-grid-tile>\\r\\n    <mat-card class=\\\"gdpr-card\\\">\\r\\n      <mat-card-header>\\r\\n        <!-- <mat-card-title>Privacy Notice</mat-card-title> -->\\r\\n          <mat-card-subtitle>\\r\\n            <div *ngIf=\\\"!isEga()\\\">\\r\\n            This service requires limited processing of your personal data in order to function.\\r\\n            By using the service you are agreeing to this as outlined in our\\r\\n            <a href=\\\"https://www.ebi.ac.uk/data-protection/privacy-notice/ena-submission\\\" rel=\\\"noopener noreferrer\\\" target=\\\"_blank\\\">Privacy Notice</a>\\r\\n            and\\r\\n            <a href=\\\"https://www.ebi.ac.uk/about/terms-of-use\\\" rel=\\\"noopener noreferrer\\\" target=\\\"_blank\\\">Terms of Use</a>.\\r\\n            </div>\\r\\n            <div *ngIf=\\\"isEga()\\\">\\r\\n            TODO\\r\\n            </div>\\r\\n          </mat-card-subtitle>\\r\\n      </mat-card-header>\\r\\n\\r\\n      <mat-card-content>\\r\\n        <button mat-raised-button color=\\\"accent\\\" type=\\\"submit\\\" name=\\\"consent\\\" (click)=\\\"consent()\\\">I agree</button>\\r\\n      </mat-card-content>\\r\\n    </mat-card>\\r\\n  </mat-grid-tile>\\r\\n</mat-grid-list>\\r\\n\"","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\n\r\nimport { Component, ViewEncapsulation } from '@angular/core';\r\nimport { WebinAuthenticationService } from '../webin-authentication.service';\r\nimport { WebinGdprService } from '../webin-gdpr.service';\r\n\r\n@Component({\r\n  selector: 'app-gdpr',\r\n  templateUrl: './gdpr.component.html',\r\n  styleUrls: ['./gdpr.component.css'],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class GdprComponent {\r\n\r\n constructor(\r\n    private _webinAuthenticationService: WebinAuthenticationService,\r\n    private _webinGdprServer: WebinGdprService) { }\r\n\r\n  isEga(): boolean {\r\n    return this._webinAuthenticationService.ega;\r\n  }\r\n\r\n  consent() {\r\n      this._webinGdprServer.consent();\r\n    }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2hlYWRlci9oZWFkZXIuY29tcG9uZW50LmNzcyJ9 */\"","module.exports = \"<header id=\\\"masthead-black-bar\\\" class=\\\"clearfix masthead-black-bar\\\">\\r\\n</header>\\r\\n<div> <!-- fxHide fxShow.gt-xs> <!-- ** Application specific content: fxHide fxShow.gt-xs ** -->\\r\\n  <header id=\\\"masthead\\\" class=\\\"masthead compact-for-data\\\">\\r\\n    <div class=\\\"masthead-inner row expanded\\\">\\r\\n      <!-- local-title -->\\r\\n      <div class=\\\"float-left inline-block padding-left-large\\\" id=\\\"local-title\\\">\\r\\n        <a routerLink=\\\"\\\"><h4 style=\\\"color:white\\\">{{getTitle()}}</h4></a> <!-- ** Application specific content ** -->\\r\\n      </div>\\r\\n      <!-- /local-title -->\\r\\n      <!-- local-nav -->\\r\\n      <nav class=\\\"float-left columns medium-6 large-6\\\" style=\\\"margin-top: 0;\\\">\\r\\n        <ul id=\\\"local-nav\\\" class=\\\"dropdown menu float-left\\\" data-description=\\\"navigational\\\">\\r\\n          <li><a href=\\\"mailto:datasubs@ebi.ac.uk\\\">Support <i class=\\\"icon icon-generic\\\" data-icon=\\\"x\\\"></i></a></li> <!-- ** Application specific content ** -->\\r\\n          <li><a href=\\\"logout\\\">Logout\\r\\n            <span *ngIf=\\\"isAuthenticated()\\\">({{getAccount()}})</span> <!-- ** Application specific content ** -->\\r\\n          </a></li>\\r\\n        </ul>\\r\\n      </nav>\\r\\n      <!-- /local-nav -->\\r\\n    </div>\\r\\n  </header>\\r\\n</div>\\r\\n\"","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\n\r\nimport { Component, ViewEncapsulation } from '@angular/core';\r\n\r\nimport { environment } from '../../environments/environment';\r\nimport { WebinAuthenticationService } from '../webin-authentication.service';\r\n\r\n@Component({\r\n  selector: 'app-header',\r\n  templateUrl: './header.component.html',\r\n  styleUrls: ['./header.component.css'],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class HeaderComponent {\r\n\r\n  constructor(private _webinAuthenticationService: WebinAuthenticationService) { }\r\n\r\n  getTitle() {\r\n    return environment.title;\r\n  }\r\n\r\n  isAuthenticated() {\r\n    return this._webinAuthenticationService.authenticated;\r\n  }\r\n\r\n  getAccount() {\r\n    return this._webinAuthenticationService.account;\r\n  }\r\n}\r\n","module.exports = \".login-card-container {\\r\\n  min-height: 400px;\\r\\n}\\r\\n\\r\\n.login-card {\\r\\n  width: 325px;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbG9naW4vbG9naW4uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLFlBQVk7QUFDZCIsImZpbGUiOiJzcmMvYXBwL2xvZ2luL2xvZ2luLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubG9naW4tY2FyZC1jb250YWluZXIge1xyXG4gIG1pbi1oZWlnaHQ6IDQwMHB4O1xyXG59XHJcblxyXG4ubG9naW4tY2FyZCB7XHJcbiAgd2lkdGg6IDMyNXB4O1xyXG59XHJcbiJdfQ== */\"","module.exports = \"<form (ngSubmit)=\\\"login()\\\">\\r\\n<div fxLayout=\\\"row\\\" fxLayoutAlign=\\\"center center\\\" class=\\\"login-card-container\\\">\\r\\n  <mat-card class=\\\"login-card\\\">\\r\\n    <mat-card-header>\\r\\n      <mat-card-title>Login</mat-card-title>\\r\\n      <mat-card-subtitle>Please provide your Webin credentials</mat-card-subtitle>\\r\\n    </mat-card-header>\\r\\n    <mat-card-content>\\r\\n      <p>\\r\\n      <mat-form-field>\\r\\n        <input matInput placeholder=\\\"Webin submission account\\\" required [(ngModel)]=\\\"username\\\" name=\\\"username\\\">\\r\\n      </mat-form-field>\\r\\n      </p>\\r\\n      <p>\\r\\n      <mat-form-field>\\r\\n        <input type=\\\"password\\\" matInput placeholder=\\\"Password\\\" required [(ngModel)]=\\\"password\\\" name=\\\"password\\\">\\r\\n      </mat-form-field>\\r\\n      </p>\\r\\n      <button mat-raised-button color=\\\"accent\\\" type=\\\"submit\\\" name=\\\"action\\\" >Login</button>\\r\\n\\r\\n      <p class=\\\"app-error\\\" *ngIf=\\\"error\\\">\\r\\n        <i class=\\\"material-icons\\\">error</i>\\r\\n        Invalid Webin submission account or password\\r\\n      </p>\\r\\n    </mat-card-content>\\r\\n  </mat-card>\\r\\n</div>\\r\\n</form>\\r\\n\"","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\n\r\nimport { Component, OnInit, ViewEncapsulation } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { WebinAuthenticationService } from '../webin-authentication.service';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { mergeMap } from 'rxjs/operators';\r\n\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.css'],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class LoginComponent implements OnInit {\r\n\r\n  username: string;\r\n  password: string;\r\n  error = false;\r\n\r\n  constructor(\r\n    private _router: Router,\r\n    private _webinAuthenticationService: WebinAuthenticationService) { }\r\n\r\n  ngOnInit() {\r\n    //  console.log('LoginComponent.ngOnInit');\r\n    if (this._webinAuthenticationService.authenticated) {\r\n      this._router.navigateByUrl('');\r\n    }\r\n  }\r\n\r\n  login() {\r\n    this._webinAuthenticationService.logout();\r\n\r\n    this._webinAuthenticationService.login(this.username, this.password).\r\n    pipe(\r\n      mergeMap(data => {\r\n        // console.log('WebinAuthenticationService.login succeeded');\r\n        this._webinAuthenticationService.ega = data.roles.EGA;\r\n        this._webinAuthenticationService.account = data.principle;\r\n        return this._webinAuthenticationService.loginToken(this.username, this.password);\r\n      })\r\n    ).\r\n    subscribe(\r\n        data => {\r\n          // console.log('WebinAuthenticationService.loginToken succeeded');\r\n          this._webinAuthenticationService.token = data;\r\n          const redirectUrl = this._webinAuthenticationService.redirectUrl;\r\n          if (redirectUrl) {\r\n            this._router.navigateByUrl(redirectUrl);\r\n            this._webinAuthenticationService.redirectUrl = null;\r\n          }\r\n          else {\r\n            this._router.navigateByUrl('');\r\n          }\r\n        },\r\n        // Errors.\r\n        (err: HttpErrorResponse) => {\r\n          this.error = true;\r\n          this._webinAuthenticationService.authenticated = false;\r\n          console.error(err);\r\n        },\r\n        () => {\r\n          this.error = false;\r\n          this._webinAuthenticationService.authenticated = true;\r\n        }\r\n      );\r\n  }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2xvZ291dC9sb2dvdXQuY29tcG9uZW50LmNzcyJ9 */\"","module.exports = \"\"","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\n\r\nimport { Component, OnInit, ViewEncapsulation } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { WebinAuthenticationService } from '../webin-authentication.service';\r\n\r\n@Component({\r\n  selector: 'app-logout',\r\n  templateUrl: './logout.component.html',\r\n  styleUrls: ['./logout.component.css'],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class LogoutComponent implements OnInit {\r\n\r\n    constructor(\r\n        private _router: Router,\r\n        private _webinAuthenticationService: WebinAuthenticationService) { }\r\n\r\n    ngOnInit() {\r\n        this._webinAuthenticationService.logout();\r\n        this._router.navigateByUrl('login');\r\n    }\r\n}\r\n","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\n\r\nimport { ReportType } from './report-type.enum';\r\nimport { ReportActionInterface } from './report-action.interface';\r\n\r\nexport enum ReportActionType {\r\n  changeReport = 'changeReport',\r\n  editXml = 'editXml',\r\n}\r\n\r\nexport namespace ReportActionType {\r\n\r\n  export function createChangeReportAction(reportType: ReportType, id: string): ReportActionInterface {\r\n    return {\r\n      reportActionType: ReportActionType.changeReport,\r\n      reportType: reportType,\r\n      id: id\r\n    };\r\n  }\r\n\r\n  export function createEditXmlAction(reportType: ReportType, id: string): ReportActionInterface {\r\n  return {\r\n      reportActionType: ReportActionType.editXml,\r\n      reportType: reportType,\r\n      id: id\r\n    };\r\n  }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3JlcG9ydC1hY3Rpb24vcmVwb3J0LWFjdGlvbi5jb21wb25lbnQuY3NzIn0= */\"","module.exports = \"<button mat-button [matMenuTriggerFor]=\\\"menu\\\">\\r\\n    <i class=\\\"material-icons\\\">launch</i></button>\\r\\n\\r\\n<mat-menu #menu=\\\"matMenu\\\">\\r\\n\\r\\n\\r\\n  <!-- Edit XML actions. -->\\r\\n\\r\\n  <div *ngIf=\\\"isEditXmlAction(ReportType.projects)\\\">\\r\\n    <button mat-menu-item (click)=\\\"editXmlAction(ReportType.projects)\\\"><i class=\\\"material-icons\\\">mode_edit</i>Edit study (project) XML</button>\\r\\n  </div>\\r\\n  <div *ngIf=\\\"isEditXmlAction(ReportType.studies)\\\">\\r\\n    <button mat-menu-item (click)=\\\"editXmlAction(ReportType.studies)\\\"><i class=\\\"material-icons\\\">mode_edit</i>Edit study XML</button>\\r\\n  </div>\\r\\n  <div *ngIf=\\\"isEditXmlAction(ReportType.samples)\\\">\\r\\n    <button mat-menu-item (click)=\\\"editXmlAction(ReportType.samples)\\\"><i class=\\\"material-icons\\\">mode_edit</i>Edit sample XML</button>\\r\\n  </div>\\r\\n  <div *ngIf=\\\"isEditXmlAction(ReportType.runs)\\\">\\r\\n    <button mat-menu-item (click)=\\\"editXmlAction(ReportType.runs)\\\"><i class=\\\"material-icons\\\">mode_edit</i>Edit run XML</button>\\r\\n  </div>\\r\\n  <div *ngIf=\\\"isEditXmlAction(ReportType.experiments)\\\">\\r\\n    <button mat-menu-item (click)=\\\"editXmlAction(ReportType.experiments)\\\"><i class=\\\"material-icons\\\">mode_edit</i>Edit experiment XML</button>\\r\\n  </div>\\r\\n  <div *ngIf=\\\"isEditXmlAction(ReportType.analyses)\\\">\\r\\n    <button mat-menu-item (click)=\\\"editXmlAction(ReportType.analyses)\\\"><i class=\\\"material-icons\\\">mode_edit</i>Edit analysis XML</button>\\r\\n  </div>\\r\\n  <div *ngIf=\\\"isEditXmlAction(ReportType.dacs)\\\">\\r\\n    <button mat-menu-item (click)=\\\"editXmlAction(ReportType.dacs)\\\"><i class=\\\"material-icons\\\">mode_edit</i>Edit dac XML</button>\\r\\n  </div>\\r\\n  <div *ngIf=\\\"isEditXmlAction(ReportType.policies)\\\">\\r\\n    <button mat-menu-item (click)=\\\"editXmlAction(ReportType.policies)\\\"><i class=\\\"material-icons\\\">mode_edit</i>Edit policy XML</button>\\r\\n  </div>\\r\\n  <div *ngIf=\\\"isEditXmlAction(ReportType.datasets)\\\">\\r\\n    <button mat-menu-item (click)=\\\"editXmlAction(ReportType.datasets)\\\"><i class=\\\"material-icons\\\">mode_edit</i>Edit dataset XML</button>\\r\\n  </div>\\r\\n\\r\\n\\r\\n  <!-- Change report actions. -->\\r\\n\\r\\n\\r\\n  <div *ngIf=\\\"isChangeReportAction(ReportType.studies)\\\">\\r\\n    <button mat-menu-item (click)=\\\"changeReportAction(ReportType.studies)\\\">Show study</button>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"isChangeReportAction(ReportType.samples)\\\">\\r\\n    <button mat-menu-item (click)=\\\"changeReportAction(ReportType.samples)\\\">Show samples</button>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"isChangeReportAction(ReportType.runs)\\\">\\r\\n    <button mat-menu-item (click)=\\\"changeReportAction(ReportType.runs)\\\">Show runs</button>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"isChangeReportAction(ReportType.analyses)\\\">\\r\\n    <button mat-menu-item (click)=\\\"changeReportAction(ReportType.analyses)\\\">Show analyses</button>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"isChangeReportAction(ReportType.runFiles)\\\">\\r\\n    <button mat-menu-item (click)=\\\"changeReportAction(ReportType.runFiles)\\\">Show submitted files</button>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"isChangeReportAction(ReportType.analysisFiles)\\\">\\r\\n    <button mat-menu-item (click)=\\\"changeReportAction(ReportType.analysisFiles)\\\">Show submitted files</button>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"isChangeReportAction(ReportType.runProcess)\\\">\\r\\n    <button mat-menu-item (click)=\\\"changeReportAction(ReportType.runProcess)\\\">Show processing status</button>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"isChangeReportAction(ReportType.analysisProcess)\\\">\\r\\n    <button mat-menu-item (click)=\\\"changeReportAction(ReportType.analysisProcess)\\\">Show processing status</button>\\r\\n  </div>\\r\\n\\r\\n\\r\\n  <div *ngIf=\\\"isChangeReportAction(ReportType.dacs)\\\">\\r\\n    <button mat-menu-item (click)=\\\"changeReportAction(ReportType.dacs)\\\">Show dac</button>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"isChangeReportAction(ReportType.policies)\\\">\\r\\n    <button mat-menu-item (click)=\\\"changeReportAction(ReportType.policies)\\\">Show policies</button>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"isChangeReportAction(ReportType.datasets)\\\">\\r\\n    <button mat-menu-item (click)=\\\"changeReportAction(ReportType.datasets)\\\">Show datasets</button>\\r\\n  </div>\\r\\n\\r\\n</mat-menu>\\r\\n\"","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\n\r\nimport { Component, ViewEncapsulation, Input, Output, EventEmitter } from '@angular/core';\r\nimport { ReportType } from '../report-type.enum';\r\nimport { ReportActionType } from '../report-action-type.enum';\r\nimport { ReportActionInterface } from '../report-action.interface';\r\n\r\n@Component({\r\n  selector: 'app-report-action',\r\n  templateUrl: './report-action.component.html',\r\n  styleUrls: ['./report-action.component.css'],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class ReportActionComponent {\r\n  @Input() actions: Array<ReportActionInterface>;\r\n  @Output() actionChange = new EventEmitter<ReportActionInterface>();\r\n\r\n  ReportType = ReportType;   // Allows use in template\r\n\r\n  constructor() { }\r\n\r\n  private isAction(reportType: ReportType, reportActionType: ReportActionType, action ): boolean {\r\n    return action.reportActionType === reportActionType && action.reportType === reportType;\r\n  }\r\n\r\n  isChangeReportAction(reportType: ReportType): boolean {\r\n      return this.actions.some( action => this.isAction(reportType, ReportActionType.changeReport, action) );\r\n  }\r\n\r\n  isEditXmlAction(reportType: ReportType): boolean {\r\n    return this.actions.some( action => this.isAction(reportType, ReportActionType.editXml, action) );\r\n  }\r\n\r\n  getChangeReportAction(reportType: ReportType): ReportActionInterface {\r\n    return this.actions.find( action => this.isAction(reportType, ReportActionType.changeReport, action) );\r\n  }\r\n\r\n  getEditXmlAction(reportType: ReportType): ReportActionInterface {\r\n    return this.actions.find( action => this.isAction(reportType, ReportActionType.editXml, action) );\r\n  }\r\n\r\n  changeReportAction(reportType: ReportType): void {\r\n    console.log('** change report action **', reportType);\r\n    this.actionChange.emit(this.getChangeReportAction(reportType));\r\n  }\r\n\r\n  editXmlAction(reportType: ReportType): void {\r\n    console.log('** edit xml action **', reportType);\r\n    this.actionChange.emit(this.getEditXmlAction(reportType));\r\n  }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3JlcG9ydC1lZGl0LWRpYWxvZy9yZXBvcnQtZWRpdC1kaWFsb2cuY29tcG9uZW50LmNzcyJ9 */\"","module.exports = \"<h2 mat-dialog-title>{{getTitle()}}</h2>\\r\\n\\r\\n<mat-dialog-content>\\r\\n\\r\\n  <div *ngIf=\\\"isRetrieveXmlError()\\\">\\r\\n\\r\\n    <!-- Show XML retrieval error -->\\r\\n\\r\\n    <div class=\\\"app-error\\\">\\r\\n        <i class=\\\"material-icons\\\">error</i>\\r\\n        {{retrieveXmlError}}\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"!isRetrieveXmlError() && !isUpdateXmlResult()\\\">\\r\\n\\r\\n      <!-- Show XML editor -->\\r\\n\\r\\n      <textarea matInput [(ngModel)]=\\\"xml\\\" rows=\\\"15\\\">\\r\\n      </textarea>\\r\\n  </div>\\r\\n\\r\\n  <!-- Show XML update result -->\\r\\n\\r\\n  <app-submission-result [showReceiptSuccess]=\\\"false\\\" #submissionResult></app-submission-result>\\r\\n\\r\\n</mat-dialog-content>\\r\\n\\r\\n<mat-dialog-actions>\\r\\n\\r\\n  <div *ngIf=\\\"!isRetrieveXmlError() && !isUpdateXmlResult()\\\">\\r\\n\\r\\n    <!-- Show save button -->\\r\\n\\r\\n    <button mat-button color=\\\"primary\\\" (click)=\\\"save()\\\">Save</button>\\r\\n    </div>\\r\\n\\r\\n  <div *ngIf=\\\"isUpdateXmlResult() && isUpdateXmlError()\\\">\\r\\n\\r\\n    <!-- Show back button -->\\r\\n\\r\\n    <button mat-button color=\\\"primary\\\" (click)=\\\"back()\\\">Back</button>\\r\\n\\r\\n  </div>\\r\\n\\r\\n  <!-- Show close button -->\\r\\n\\r\\n  <button mat-button color=\\\"primary\\\" [mat-dialog-close]=\\\"true\\\">Close</button>\\r\\n\\r\\n</mat-dialog-actions>\\r\\n\"","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\n\r\nimport { Component, OnInit, ViewEncapsulation, ViewChild, Inject } from '@angular/core';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { WebinXmlReportService } from '../webin-xml-report.service';\r\nimport { WebinRestService } from '../webin-rest.service';\r\nimport { SubmissionResultComponent } from '../submission-result/submission-result.component';\r\n\r\nimport { ReportType } from '../report-type.enum';\r\nimport { ReportActionInterface } from '../report-action.interface';\r\n\r\n@Component({\r\n  selector: 'app-report-edit-dialog',\r\n  templateUrl: './report-edit-dialog.component.html',\r\n  styleUrls: ['./report-edit-dialog.component.css'],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class ReportEditDialogComponent implements OnInit {\r\n\r\n  @ViewChild(SubmissionResultComponent) submissionResult: SubmissionResultComponent;\r\n\r\n  constructor(\r\n    private _webinXmlReportService: WebinXmlReportService,\r\n    private _webinRestService: WebinRestService,\r\n    public dialogRef: MatDialogRef<ReportEditDialogComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: ReportActionInterface) { }\r\n\r\n  retrieveXmlError: string;\r\n  xml: string;\r\n\r\n  ngOnInit() {\r\n    this.load();\r\n  }\r\n\r\n  isUpdateXmlResult(): boolean {\r\n    return this.submissionResult.isResult();\r\n  }\r\n\r\n  isUpdateXmlError(): boolean {\r\n    return this.submissionResult.isError();\r\n  }\r\n\r\n  isRetrieveXmlError(): boolean {\r\n    return this.retrieveXmlError ? true : false;\r\n  }\r\n\r\n  getTitle(): string {\r\n    return ReportType.getCapitalisedSingularName(this.data.reportType) + ': ' + this.data.id;\r\n  }\r\n\r\n  load(): void {\r\n    let observable: Observable<string>;\r\n\r\n    const id: string = this.data.id;\r\n    const reportType: ReportType = this.data.reportType;\r\n\r\n    console.log('** xml retrieval **', reportType, id);\r\n\r\n    switch (reportType) {\r\n       case ReportType.studies: {\r\n         observable = this._webinXmlReportService.getStudyXml(id);\r\n         break;\r\n       }\r\n       case ReportType.projects: {\r\n         observable = this._webinXmlReportService.getProjectXml(id);\r\n         break;\r\n       }\r\n       case ReportType.samples: {\r\n         observable = this._webinXmlReportService.getSampleXml(id);\r\n         break;\r\n       }\r\n       case ReportType.runs: {\r\n         observable = this._webinXmlReportService.getRunXml(id);\r\n         break;\r\n       }\r\n       case ReportType.experiments: {\r\n        observable = this._webinXmlReportService.getExperimentXml(id);\r\n         break;\r\n       }\r\n       case ReportType.analyses: {\r\n         observable = this._webinXmlReportService.getAnalysisXml(id);\r\n         break;\r\n       }\r\n       case ReportType.dacs: {\r\n         observable = this._webinXmlReportService.getDacXml(id);\r\n         break;\r\n       }\r\n       case ReportType.policies: {\r\n         observable = this._webinXmlReportService.getPolicyXml(id);\r\n         break;\r\n       }\r\n       case ReportType.datasets: {\r\n         observable = this._webinXmlReportService.getDatasetXml(id);\r\n         break;\r\n       }\r\n    }\r\n\r\n    if (observable) {\r\n      observable.subscribe(\r\n        // Success\r\n        data => {\r\n          console.log('** xml retrieval succeeded **', data);\r\n          this.xml = data;\r\n        },\r\n        // Errors\r\n        (err: HttpErrorResponse) => {\r\n          console.error('** webin xml retrieval service failed **', err);\r\n          const msg = 'Webin XML retrieval service failed. Please try again later. If the problem persists please contact the helpdesk.';\r\n          this.retrieveXmlError = msg;\r\n      });\r\n    }\r\n  }\r\n\r\n  back(): void {\r\n    this.submissionResult.reset();\r\n  }\r\n\r\n  save() {\r\n    const observable: Observable<string> = this._webinRestService.updateXml(\r\n      this.data.reportType, new Blob([ this.xml ]));\r\n\r\n    this.submissionResult.submit(observable);\r\n  }\r\n}\r\n","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\n\r\nexport enum ReportType {\r\n  studies = 'studies',\r\n  projects = 'projects',\r\n  samples = 'samples',\r\n  experiments = 'experiments',\r\n  runs = 'runs',\r\n  analyses = 'analyses',\r\n  runFiles = 'runFiles',\r\n  analysisFiles = 'analysisFiles',\r\n  runProcess = 'runProcess',\r\n  analysisProcess = 'analysisProcess',\r\n  unsubmittedFiles = 'unsubmittedFiles',\r\n  dacs = 'dacs',\r\n  policies = 'policies',\r\n  datasets = 'datasets'\r\n}\r\n\r\nexport namespace ReportType {\r\n\r\n  export function getCapitalisedSingularName(reportType: ReportType): string {\r\n    switch (reportType) {\r\n       case ReportType.studies: {\r\n         return 'Study';\r\n       }\r\n       case ReportType.projects: {\r\n         return 'Project';\r\n       }\r\n       case ReportType.samples: {\r\n         return 'Sample';\r\n       }\r\n       case ReportType.experiments: {\r\n         return 'Experiment';\r\n       }\r\n       case ReportType.runs: {\r\n         return 'Run';\r\n       }\r\n       case ReportType.analyses: {\r\n         return 'Analysis';\r\n       }\r\n       case ReportType.runFiles: {\r\n         return 'Submitted files for run';\r\n       }\r\n       case ReportType.analysisFiles: {\r\n         return 'Submitted files for analysis';\r\n       }\r\n       case ReportType.runProcess: {\r\n         return 'Run processing status';\r\n       }\r\n       case ReportType.analysisProcess: {\r\n         return 'Analysis processing status';\r\n       }\r\n       case ReportType.unsubmittedFiles: {\r\n         return 'Unsubmitted files';\r\n       }\r\n       case ReportType.dacs: {\r\n         return 'Dac';\r\n       }\r\n       case ReportType.policies: {\r\n         return 'Policy';\r\n       }\r\n       case ReportType.datasets: {\r\n         return 'Dataset';\r\n       }\r\n       default: {\r\n         return '';\r\n       }\r\n    }\r\n  }\r\n\r\n\r\n  export function getPluralName(reportType: ReportType): string {\r\n    switch (reportType) {\r\n       case ReportType.studies: {\r\n         return 'studies';\r\n       }\r\n       case ReportType.projects: {\r\n         return 'projects';\r\n       }\r\n       case ReportType.samples: {\r\n         return 'samples';\r\n       }\r\n       case ReportType.experiments: {\r\n         return 'experiments';\r\n       }\r\n       case ReportType.runs: {\r\n         return 'runs';\r\n       }\r\n       case ReportType.analyses: {\r\n         return 'analyses';\r\n       }\r\n       case ReportType.runFiles: {\r\n         return 'run files';\r\n       }\r\n       case ReportType.analysisFiles: {\r\n         return 'analyses files';\r\n       }\r\n       case ReportType.runProcess: {\r\n         return 'processing status of archived run files';\r\n       }\r\n       case ReportType.analysisProcess: {\r\n         return 'processing status of archived analysis files';\r\n       }\r\n       case ReportType.unsubmittedFiles: {\r\n         return 'unsubmitted files';\r\n       }\r\n       case ReportType.dacs: {\r\n         return 'dacs';\r\n       }\r\n       case ReportType.policies: {\r\n         return 'policies';\r\n       }\r\n       case ReportType.datasets: {\r\n         return 'datasets';\r\n       }\r\n       default: {\r\n         return '';\r\n       }\r\n    }\r\n  }\r\n}\r\n","module.exports = \"table, th, td {\\r\\n    background: white;\\r\\n}\\r\\n\\r\\n.component-margin {\\r\\n  margin-top: 5px;\\r\\n  margin-right: 5px;\\r\\n  margin-bottom: 5px;\\r\\n  margin-left: 5px;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcmVwb3J0L3JlcG9ydC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksaUJBQWlCO0FBQ3JCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLGlCQUFpQjtFQUNqQixrQkFBa0I7RUFDbEIsZ0JBQWdCO0FBQ2xCIiwiZmlsZSI6InNyYy9hcHAvcmVwb3J0L3JlcG9ydC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsidGFibGUsIHRoLCB0ZCB7XHJcbiAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcclxufVxyXG5cclxuLmNvbXBvbmVudC1tYXJnaW4ge1xyXG4gIG1hcmdpbi10b3A6IDVweDtcclxuICBtYXJnaW4tcmlnaHQ6IDVweDtcclxuICBtYXJnaW4tYm90dG9tOiA1cHg7XHJcbiAgbWFyZ2luLWxlZnQ6IDVweDtcclxufVxyXG4iXX0= */\"","module.exports = \"<div class=\\\"component-margin\\\">\\r\\n\\r\\n<p>\\r\\n  <span class = \\\"app-primary-color\\\">\\r\\n  <i class=\\\"material-icons\\\">info</i>\\r\\n  </span>\\r\\n\\r\\n  <span *ngIf=\\\"isMetadataReport()\\\">\\r\\n  Shows submitted {{ ReportType.getPluralName(reportType) }} and their release statuses. Search by accession or unique name, or simply click search to show most recent submissions. The results will show the most recently submitted {{ReportType.getPluralName(reportType)}}\\r\\n  in your submission account.\\r\\n  </span>\\r\\n\\r\\n  <span *ngIf=\\\"isFileReport()\\\">\\r\\n  Shows submitted {{ ReportType.getPluralName(reportType) }} and their archival statuses. Search by accession or other conditions, or simply click search to show most recent submissions. The results will show the most recently submitted {{ReportType.getPluralName(reportType)}}\\r\\n  in your submission account.\\r\\n  </span>\\r\\n\\r\\n  <span *ngIf=\\\"isProcessReport()\\\">\\r\\n  Shows the {{ ReportType.getPluralName(reportType) }}. Search by accession or other conditions, or simply click search to show most recent submissions. The results will show the {{ReportType.getPluralName(reportType)}} in your submission account.\\r\\n  </span>\\r\\n\\r\\n  <span *ngIf=\\\"reportType === ReportType.runProcess\\\">\\r\\n  </span>\\r\\n\\r\\n  <span *ngIf=\\\"reportType === ReportType.analysisProcess\\\">\\r\\n  The primary use of this report is to retrieve sequence accessions assigned as part of\\r\\n  genome assembly, transcriptome assembly or sequence flat file submissions.\\r\\n  </span>\\r\\n\\r\\n  <span *ngIf=\\\"reportType === ReportType.unsubmittedFiles\\\">\\r\\n  Shows uploaded files scheduled to be removed unless submitted by the expiration date.\\r\\n  Uploaded files will only be included into the archive once they have been\\r\\n  submitted either as runs or analyses. <b>Note that unlike all other reports, the\\r\\n  contents of this report may not be fully up to date. This report\\r\\n  is refreshed at most once per day.</b>\\r\\n  </span>\\r\\n\\r\\n</p>\\r\\n\\r\\n<p><b>Please click search to see the results.</b></p>\\r\\n\\r\\n<div fxLayout=\\\"row wrap\\\"\\r\\n     fxLayoutAlign=\\\"start center\\\">\\r\\n\\r\\n  <div *ngIf=\\\"!isMetadataReport() && reportType !== ReportType.unsubmittedFiles\\\">\\r\\n    <mat-form-field class=\\\"app-field-padding\\\">\\r\\n        <input matInput placeholder=\\\"Accession\\\" [(ngModel)]=\\\"id\\\">\\r\\n    </mat-form-field>\\r\\n  </div>\\r\\n  <div *ngIf=\\\"isMetadataReport() && reportType !== ReportType.unsubmittedFiles\\\">\\r\\n    <mat-form-field class=\\\"app-field-padding\\\">\\r\\n      <input matInput placeholder=\\\"Accession or Name\\\" [(ngModel)]=\\\"id\\\">\\r\\n    </mat-form-field>\\r\\n  </div>\\r\\n  <div *ngIf=\\\"isMetadataReport()\\\">\\r\\n    <mat-form-field class=\\\"app-field-padding\\\">\\r\\n      <mat-select placeholder=\\\"Release status\\\" [(ngModel)]=\\\"status\\\">\\r\\n        <mat-option value=\\\"private\\\">\\r\\n          Private\\r\\n        </mat-option>\\r\\n        <mat-option value=\\\"cancelled\\\">\\r\\n          Cancelled\\r\\n        </mat-option>\\r\\n        <mat-option value=\\\"public\\\">\\r\\n          Public\\r\\n        </mat-option>\\r\\n        <mat-option value=\\\"suppressed\\\">\\r\\n          Suppressed\\r\\n        </mat-option>\\r\\n        <mat-option value=\\\"killed\\\">\\r\\n          Killed\\r\\n        </mat-option>\\r\\n        <mat-option value=\\\"temporarily suppressed\\\">\\r\\n          Temporarily suppressed\\r\\n        </mat-option>\\r\\n        <mat-option value=\\\"temporarily killed\\\">\\r\\n          Temporarily killed\\r\\n        </mat-option>\\r\\n      </mat-select>\\r\\n    </mat-form-field>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"reportType === ReportType.analyses || reportType === ReportType.analysisFiles || reportType === ReportType.analysisProcess\\\">\\r\\n    <mat-form-field class=\\\"app-field-padding\\\">\\r\\n      <mat-select placeholder=\\\"Analysis type\\\" [(ngModel)]=\\\"analysisType\\\">\\r\\n        <mat-option value=\\\"SEQUENCE_ASSEMBLY\\\">\\r\\n          Genome assembly\\r\\n        </mat-option>\\r\\n        <mat-option value=\\\"TRANSCRIPTOME_ASSEMBLY\\\">\\r\\n          Transcriptome assembly\\r\\n        </mat-option>\\r\\n        <mat-option value=\\\"PATHOGEN_ANALYSIS\\\">\\r\\n          Pathogen analysis\\r\\n        </mat-option>\\r\\n        <mat-option value=\\\"AMR_ANTIBIOGRAM\\\">\\r\\n          AMR Antibiogram\\r\\n        </mat-option>\\r\\n        <mat-option value=\\\"SEQUENCE_ANNOTATION\\\">\\r\\n          Sequence annotation\\r\\n        </mat-option>\\r\\n        <mat-option value=\\\"SEQUENCE_VARIATION\\\">\\r\\n          Sequence variation\\r\\n        </mat-option>\\r\\n        <mat-option value=\\\"REFERENCE_ALIGNMENT\\\">\\r\\n          Reference alignment\\r\\n        </mat-option>\\r\\n        <mat-option value=\\\"REFERENCE_SEQUENCE\\\">\\r\\n          Reference sequence\\r\\n        </mat-option>\\r\\n        <mat-option value=\\\"PROCESSED_READS\\\">\\r\\n          Processed reads\\r\\n        </mat-option>\\r\\n        <mat-option value=\\\"SEQUENCE_FLATFILE\\\">\\r\\n          Sequence flatfile\\r\\n        </mat-option>\\r\\n      </mat-select>\\r\\n    </mat-form-field>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"isFileReport()\\\">\\r\\n    <mat-form-field class=\\\"app-field-padding\\\">\\r\\n      <mat-select placeholder=\\\"Archive status\\\" [(ngModel)]=\\\"processStatus\\\">\\r\\n        <mat-option value=\\\"active\\\">\\r\\n          active\\r\\n        </mat-option>\\r\\n        <mat-option value=\\\"completed\\\">\\r\\n          completed\\r\\n        </mat-option>\\r\\n        <mat-option value=\\\"failed\\\">\\r\\n          failed\\r\\n        </mat-option>\\r\\n      </mat-select>\\r\\n    </mat-form-field>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"isProcessReport()\\\">\\r\\n    or\\r\\n    <mat-form-field class=\\\"app-field-padding\\\">\\r\\n      <mat-select placeholder=\\\"Process status\\\" [(ngModel)]=\\\"processStatus\\\">\\r\\n        <mat-option value=\\\"active\\\">\\r\\n          active\\r\\n        </mat-option>\\r\\n        <mat-option value=\\\"completed\\\">\\r\\n          completed\\r\\n        </mat-option>\\r\\n        <mat-option value=\\\"failed\\\">\\r\\n          failed\\r\\n        </mat-option>\\r\\n      </mat-select>\\r\\n    </mat-form-field>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"app-field-padding\\\">\\r\\n    <button mat-raised-button color=\\\"accent\\\" (click)=\\\"report()\\\" [disabled]=\\\"active\\\">\\r\\n      Search\\r\\n    </button>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"app-field-padding\\\">\\r\\n    <button mat-raised-button (click)=\\\"reset()\\\">\\r\\n      Reset\\r\\n    </button>\\r\\n  </div>\\r\\n\\r\\n  <div>\\r\\n    <mat-form-field class=\\\"app-field-padding\\\">\\r\\n      <mat-select placeholder=\\\"Maximum rows\\\" [(ngModel)]=\\\"rows\\\">\\r\\n        <mat-option value=\\\"100\\\">\\r\\n          100\\r\\n        </mat-option>\\r\\n        <mat-option value=\\\"500\\\">\\r\\n          500\\r\\n        </mat-option>\\r\\n        <mat-option value=\\\"1000\\\">\\r\\n          1000\\r\\n        </mat-option>\\r\\n        <mat-option value=\\\"5000\\\">\\r\\n          5000\\r\\n        </mat-option>\\r\\n      </mat-select>\\r\\n    </mat-form-field>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"isMetadataReport()\\\">\\r\\n    <mat-checkbox class=\\\"app-field-padding\\\" [(ngModel)]=\\\"showAlias\\\">\\r\\n      Show unique name\\r\\n    </mat-checkbox>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div *ngIf=\\\"this.data && this.data.length > 0\\\">\\r\\n  <p><a href=\\\"{{ csvDownloadAllLink() }}\\\">Download all results</a></p>\\r\\n</div>\\r\\n\\r\\n<div *ngIf=\\\"active\\\" style=\\\"height:70px;\\\">\\r\\n    <mat-spinner [diameter]=\\\"50\\\" [strokeWidth]=\\\"5\\\" style=\\\"margin:0 auto;\\\">\\r\\n    </mat-spinner>\\r\\n</div>\\r\\n\\r\\n<div *ngIf=\\\"dataSource\\\">\\r\\n\\r\\n  <table cdk-table [dataSource]=\\\"dataSource\\\">\\r\\n      <ng-container *ngFor=\\\"let col of displayedColumns\\\" cdkColumnDef={{col}}>\\r\\n  \\t    <th cdk-header-cell *cdkHeaderCellDef>{{ col }}</th>\\r\\n        <ng-container *ngIf=\\\"col!='Action' && col!='Archive status' && col!='Process status'\\\">\\r\\n  \\t         <td cdk-cell *cdkCellDef=\\\"let element\\\">{{getElementValue(element, col)}}</td>\\r\\n        </ng-container>\\r\\n\\r\\n        <ng-container *ngIf=\\\"col=='Archive status'\\\">\\r\\n\\r\\n          <td cdk-cell *cdkCellDef=\\\"let element\\\">\\r\\n            <ng-container *ngIf=\\\"getElementValue(element, col)=='File archived'\\\">\\r\\n              <span class=\\\"action-completed\\\"\\r\\n                    matTooltip=\\\"The file has been included in the permanent archive.\\\">{{getElementValue(element, col)}}</span>\\r\\n            </ng-container>\\r\\n            <ng-container *ngIf=\\\"getElementValue(element, col)=='Processing file' || getElementValue(element, col)=='File submitted'\\\">\\r\\n              <span class=\\\"action-active\\\"\\r\\n              matTooltip=\\\"The file is waiting to be included in the permanent archive.\\\">{{getElementValue(element, col)}}</span>\\r\\n            </ng-container>\\r\\n            <ng-container *ngIf=\\\"getElementValue(element, col)!='File archived' && getElementValue(element, col)!='Processing file' && getElementValue(element, col)!='File submitted'\\\">\\r\\n              <span class=\\\"action-failed\\\"\\r\\n              matTooltip=\\\"The file has failed to be included in the permanent archived.\\\">{{getElementValue(element, col)}}</span>\\r\\n            </ng-container>\\r\\n          </td>\\r\\n\\r\\n        </ng-container>\\r\\n\\r\\n        <ng-container *ngIf=\\\"col=='Process status'\\\">\\r\\n\\r\\n          <td cdk-cell *cdkCellDef=\\\"let element\\\">\\r\\n\\r\\n            <ng-container *ngIf=\\\"getElementValue(element, col)=='COMPLETED' || getElementValue(element, col)=='CANCELLED'\\\">\\r\\n              <span class=\\\"action-completed\\\"\\r\\n                   matTooltip=\\\"The post-archival processing of the file has finished.\\\">{{getElementValue(element, col)}}</span>\\r\\n            </ng-container>\\r\\n            <ng-container *ngIf=\\\"getElementValue(element, col)=='FAILED'\\\">\\r\\n              <span class=\\\"action-failed\\\"\\r\\n                   matTooltip=\\\"The post-archival processing of the file has failed.\\\">{{getElementValue(element, col)}}</span>\\r\\n            </ng-container>\\r\\n            <ng-container *ngIf=\\\"getElementValue(element, col)!='COMPLETED' && getElementValue(element, col)!='CANCELLED' && getElementValue(element, col)!='FAILED'\\\">\\r\\n              <span class=\\\"action-active\\\"\\r\\n                   matTooltip=\\\"The post-archival processing of the file is ongoing.\\\">{{getElementValue(element, col)}}</span>\\r\\n            </ng-container>\\r\\n\\r\\n          </td>\\r\\n\\r\\n        </ng-container>\\r\\n\\r\\n\\r\\n        <ng-container *ngIf=\\\"col=='Action'\\\">\\r\\n\\r\\n          <td cdk-cell *cdkCellDef=\\\"let element\\\">\\r\\n            <span *ngIf=\\\"media.isActive('xs')\\\">Action:</span>\\r\\n            <app-report-action [actions]=\\\"getActions(element)\\\" (actionChange)=\\\"action($event)\\\">\\r\\n            </app-report-action>\\r\\n\\r\\n          </td>\\r\\n\\r\\n        </ng-container>\\r\\n\\r\\n      </ng-container>\\r\\n\\r\\n      <tr cdk-header-row *cdkHeaderRowDef=\\\"displayedColumns\\\"></tr>\\r\\n      <tr cdk-row *cdkRowDef=\\\"let row; columns: displayedColumns;\\\"></tr> <!-- (click)=\\\"clickRow(row)\\\" -->\\r\\n\\r\\n  </table>\\r\\n</div>\\r\\n\\r\\n<div [hidden]=\\\"!dataSource\\\">\\r\\n  <!-- the paginator must be created before the dataSource has been defined -->\\r\\n  <mat-paginator #dataPaginator\\r\\n                 [pageSize]=\\\"10\\\"\\r\\n                 [pageSizeOptions]=\\\"[10, 25, 50]\\\">\\r\\n  </mat-paginator>\\r\\n\\r\\n</div>\\r\\n\\r\\n<div *ngIf=\\\"dataError\\\">\\r\\n  <div class=\\\"app-error\\\">\\r\\n      <i class=\\\"material-icons\\\">error</i>\\r\\n      {{dataError}}\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n</div> <!-- component-margin -->\\r\\n\"","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\n\r\nimport { Component, EventEmitter, ViewEncapsulation, ViewChild, Input, Output } from '@angular/core';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { MatPaginator, MatTableDataSource } from '@angular/material';\r\nimport { MatDialog } from '@angular/material';\r\nimport { Observable } from 'rxjs';\r\nimport { retry } from 'rxjs/operators';\r\nimport { ObservableMedia } from '@angular/flex-layout';\r\n\r\nimport { ReportEditDialogComponent } from '../report-edit-dialog/report-edit-dialog.component';\r\nimport { ReportType } from '../report-type.enum';\r\nimport { ReportActionType } from '../report-action-type.enum';\r\n\r\nimport { WebinReportService } from '../webin-report.service';\r\nimport { WebinAuthenticationService } from '../webin-authentication.service';\r\nimport { ReportActionInterface } from '../report-action.interface';\r\n\r\n@Component({\r\n  selector: 'app-report',\r\n  templateUrl: './report.component.html',\r\n  styleUrls: ['./report.component.css'],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class ReportComponent {\r\n\r\n  ReportType = ReportType;   // Allows use in template\r\n\r\n\r\n  @Input() reportType: ReportType;\r\n  @Output() reportChange = new EventEmitter<ReportActionInterface>();\r\n  @ViewChild(MatPaginator) dataPaginator: MatPaginator;\r\n\r\n  private _id: string;\r\n  private _showAlias = false;\r\n  private _status: string;\r\n  private _processStatus: string;\r\n  private _analysisType: string;\r\n  rows = '100';\r\n  data;\r\n  dataSource: MatTableDataSource<any>;\r\n  displayedColumns;\r\n  displayedColumnsCallback;\r\n  dataError;\r\n  active: boolean;\r\n\r\n  constructor(\r\n    private _webinReportService: WebinReportService,\r\n    private _webinAuthenticationService: WebinAuthenticationService,\r\n    private _reportDialog: MatDialog,\r\n    public media: ObservableMedia) { }\r\n\r\n  isEga(): boolean {\r\n    return this._webinAuthenticationService.ega;\r\n  }\r\n\r\n  get id(): string {\r\n    return this._id;\r\n  }\r\n\r\n  set id(id: string) {\r\n    this._id = id;\r\n    this._status = undefined;\r\n    this._processStatus = undefined;\r\n    this._analysisType = undefined;\r\n  }\r\n\r\n  get showAlias(): boolean {\r\n    return this._showAlias;\r\n  }\r\n\r\n  set showAlias(showAlias: boolean) {\r\n    this._showAlias = showAlias;\r\n    this.initReportColumns();\r\n  }\r\n\r\n  get status(): string {\r\n    return this._status;\r\n  }\r\n\r\n  set status(status: string) {\r\n    this._status = status;\r\n    this._id = undefined;\r\n  }\r\n\r\n  get processStatus(): string {\r\n    return this._processStatus;\r\n  }\r\n\r\n  set processStatus(processStatus: string) {\r\n    this._processStatus = processStatus;\r\n    this._id = undefined;\r\n  }\r\n\r\n  get analysisType(): string {\r\n    return this._analysisType;\r\n  }\r\n\r\n  set analysisType(analysisType: string) {\r\n    this._analysisType = analysisType;\r\n    this._id = undefined;\r\n  }\r\n\r\n  isMetadataReport() {\r\n    return this.reportType !== ReportType.runFiles &&\r\n      this.reportType !== ReportType.analysisFiles &&\r\n      this.reportType !== ReportType.runProcess &&\r\n      this.reportType !== ReportType.analysisProcess &&\r\n      this.reportType !== ReportType.unsubmittedFiles;\r\n  }\r\n\r\n  isFileReport() {\r\n    return this.reportType === ReportType.runFiles ||\r\n      this.reportType === ReportType.analysisFiles;\r\n  }\r\n\r\n  isProcessReport() {\r\n    return this.reportType === ReportType.runProcess ||\r\n      this.reportType === ReportType.analysisProcess;\r\n  }\r\n\r\n  setStudyReportColumns() {\r\n    this.displayedColumns = [\r\n      this._showAlias ? 'Unique name' : 'Accession',\r\n      'Secondary Accession',\r\n      'Title',\r\n      'Submission date',\r\n      'Release date',\r\n      'Status',\r\n      'Action', // No callback for Action column\r\n    ];\r\n    this.displayedColumnsCallback = {\r\n      Accession: this.accessionColumnCallback.bind(this),\r\n      'Unique name': this.aliasColumnCallback.bind(this),\r\n      'Secondary Accession': this.secondaryIdColumnCallback.bind(this),\r\n      Title: this.titleColumnCallback.bind(this),\r\n      'Submission date': this.submissionDateColumnCallback.bind(this),\r\n      'Release date': this.releaseDateColumnCallback.bind(this),\r\n      Status: this.statusColumnCallback.bind(this)\r\n    };\r\n  }\r\n\r\n  setSampleReportColumns() {\r\n    this.displayedColumns = [\r\n      this._showAlias ? 'Unique name' : 'Accession',\r\n      'BioSample',\r\n      'Title',\r\n      'Organism',\r\n      'Tax id',\r\n      'Submission date',\r\n      'Status',\r\n      'Action', // No callback for Action column\r\n    ];\r\n    this.displayedColumnsCallback = {\r\n      Accession: this.accessionColumnCallback.bind(this),\r\n      'Unique name': this.aliasColumnCallback.bind(this),\r\n      BioSample: this.secondaryIdColumnCallback.bind(this),\r\n      Title: this.titleColumnCallback.bind(this),\r\n      Organism: this.organismColumnCallback.bind(this),\r\n      'Tax id': this.taxIdColumnCallback.bind(this),\r\n      'Submission date': this.submissionDateColumnCallback.bind(this),\r\n      Status: this.statusColumnCallback.bind(this)\r\n    };\r\n  }\r\n\r\n  setRunReportColumns() {\r\n    this.displayedColumns = [\r\n      this._showAlias ? 'Unique name' : 'Accession',\r\n      'Instrument',\r\n      'Study',\r\n      'Sample',\r\n      'Experiment',\r\n      'Submission date',\r\n      'Status',\r\n      'Action', // No callback for Action column\r\n    ];\r\n    this.displayedColumnsCallback = {\r\n      Accession: this.accessionColumnCallback.bind(this),\r\n      'Unique name': this.aliasColumnCallback.bind(this),\r\n      Instrument: this.instrumentColumnCallback.bind(this),\r\n      Study: this.studyColumnCallback.bind(this),\r\n      Sample: this.sampleColumnCallback.bind(this),\r\n      Experiment: this.experimentColumnCallback.bind(this),\r\n      'Submission date': this.submissionDateColumnCallback.bind(this),\r\n      Status: this.statusColumnCallback.bind(this)\r\n    };\r\n  }\r\n\r\n  setAnalysisReportColumns() {\r\n    this.displayedColumns = [\r\n      this._showAlias ? 'Unique name' : 'Accession',\r\n      'Analysis type',\r\n      'Study',\r\n      'Sample',\r\n      'Submission date',\r\n      'Status',\r\n      'Action', // No callback for Action column\r\n    ];\r\n    this.displayedColumnsCallback = {\r\n      Accession: this.accessionColumnCallback.bind(this),\r\n      'Unique name': this.aliasColumnCallback.bind(this),\r\n      'Analysis type': this.analysisTypeColumnCallback.bind(this),\r\n      Study: this.studyColumnCallback.bind(this),\r\n      Sample: this.sampleColumnCallback.bind(this),\r\n      'Submission date': this.submissionDateColumnCallback.bind(this),\r\n      Status: this.statusColumnCallback.bind(this)\r\n    };\r\n  }\r\n\r\n  setRunFileReportColumns() {\r\n    this.displayedColumns = [\r\n      'Accession',\r\n      // 'Submission date',\r\n      'File name',\r\n      'File format',\r\n      'File size',\r\n      // 'Checksum method',\r\n      'MD5 checksum',\r\n      'Archive status',\r\n      'Action' // No callback for Action column\r\n    ];\r\n    this.displayedColumnsCallback = {\r\n      Accession: this.accessionColumnCallback.bind(this),\r\n      // 'Submission date': this.submissionDateColumnCallback.bind(this),\r\n      'File name': this.fileNameColumnCallback.bind(this),\r\n      'File format': this.fileFormatColumnCallback.bind(this),\r\n      'File size': this.fileSizeColumnCallback.bind(this),\r\n      // 'Checksum method': this.fileChecksumMethodColumnCallback.bind(this),\r\n      'MD5 checksum': this.fileChecksumColumnCallback.bind(this),\r\n      'Archive status': this.fileArchiveStatusColumnCallback.bind(this)\r\n    };\r\n  }\r\n\r\n  setAnalysisFileReportColumns() {\r\n    this.displayedColumns = [\r\n      'Accession',\r\n      // 'Analysis type',\r\n      // 'Submission date',\r\n      'File name',\r\n      'File format',\r\n      'File size',\r\n      // 'Checksum method',\r\n      'MD5 checksum',\r\n      'Archive status',\r\n      'Action' // No callback for Action column\r\n    ];\r\n    this.displayedColumnsCallback = {\r\n      Accession: this.accessionColumnCallback.bind(this),\r\n      // 'Analysis type': this.analysisTypeColumnCallback.bind(this),\r\n      // 'Submission date': this.submissionDateColumnCallback.bind(this),\r\n      'File name': this.fileNameColumnCallback.bind(this),\r\n      'File format': this.fileFormatColumnCallback.bind(this),\r\n      'File size': this.fileSizeColumnCallback.bind(this),\r\n      // 'Checksum method': this.fileChecksumMethodColumnCallback.bind(this),\r\n      'MD5 checksum': this.fileChecksumColumnCallback.bind(this),\r\n      'Archive status': this.fileArchiveStatusColumnCallback.bind(this)\r\n    };\r\n  }\r\n\r\n  setRunProcessReportColumns() {\r\n    this.displayedColumns = [\r\n      'Accession',\r\n      'Process status',\r\n      'Process error',\r\n      'Action', // No callback for Action column\r\n    ];\r\n    this.displayedColumnsCallback = {\r\n      Accession: this.accessionColumnCallback.bind(this),\r\n      'Process status': this.processingStatusColumnCallback.bind(this),\r\n      'Process error': this.processingErrorColumnCallback.bind(this)\r\n    };\r\n  }\r\n\r\n  setAnalysisProcessReportColumns() {\r\n    this.displayedColumns = [\r\n      'Accession',\r\n      'Analysis type',\r\n      'Sequence accession',\r\n      'Process status',\r\n      'Process error',\r\n      'Action', // No callback for Action column\r\n    ];\r\n    this.displayedColumnsCallback = {\r\n      Accession: this.accessionColumnCallback.bind(this),\r\n      'Analysis type': this.analysisTypeColumnCallback.bind(this),\r\n      'Sequence accession': this.processingAccessionColumnCallback.bind(this),\r\n      'Process status': this.processingStatusColumnCallback.bind(this),\r\n      'Process error': this.processingErrorColumnCallback.bind(this)\r\n    };\r\n  }\r\n\r\n  setUnsubmittedFilesReportColumns() {\r\n    this.displayedColumns = [\r\n      'File name',\r\n      'File size',\r\n      'Upload date',\r\n      'Expiration date'\r\n    ];\r\n    this.displayedColumnsCallback = {\r\n      'File name': this.fileNameColumnCallback.bind(this),\r\n      'File size': this.fileSizeColumnCallback.bind(this),\r\n      'Upload date': this.uploadDateColumnCallback.bind(this),\r\n      'Expiration date': this.expirationDateColumnCallback.bind(this)\r\n    };\r\n  }\r\n\r\n  setDacReportColumns() {\r\n    this.displayedColumns = [\r\n      this._showAlias ? 'Unique name' : 'Accession',\r\n      'Title',\r\n      'Submission date',\r\n      'Status',\r\n      'Action', // No callback for Action column\r\n    ];\r\n    this.displayedColumnsCallback = {\r\n      Accession: this.accessionColumnCallback.bind(this),\r\n      'Unique name': this.aliasColumnCallback.bind(this),\r\n      Title: this.titleColumnCallback.bind(this),\r\n      'Submission date': this.submissionDateColumnCallback.bind(this),\r\n      Status: this.statusColumnCallback.bind(this)\r\n    };\r\n  }\r\n\r\n  setPolicyReportColumns() {\r\n    this.displayedColumns = [\r\n      this._showAlias ? 'Unique name' : 'Accession',\r\n      'Dac',\r\n      'Title',\r\n      'Submission date',\r\n      'Status',\r\n      'Action', // No callback for Action column\r\n    ];\r\n    this.displayedColumnsCallback = {\r\n      Accession: this.accessionColumnCallback.bind(this),\r\n      'Unique name': this.aliasColumnCallback.bind(this),\r\n      Dac: this.dacColumnCallback.bind(this),\r\n      Title: this.titleColumnCallback.bind(this),\r\n      'Submission date': this.submissionDateColumnCallback.bind(this),\r\n      Status: this.statusColumnCallback.bind(this)\r\n    };\r\n  }\r\n\r\n  setDatasetReportColumns() {\r\n    this.displayedColumns = [\r\n      this._showAlias ? 'Unique name' : 'Accession',\r\n      'Policy',\r\n      'Title',\r\n      'Submission date',\r\n      'Status',\r\n      'Action', // No callback for Action column\r\n    ];\r\n    this.displayedColumnsCallback = {\r\n      Accession: this.accessionColumnCallback.bind(this),\r\n      'Unique name': this.aliasColumnCallback.bind(this),\r\n      Policy: this.policyColumnCallback.bind(this),\r\n      Title: this.titleColumnCallback.bind(this),\r\n      'Submission date': this.submissionDateColumnCallback.bind(this),\r\n      Status: this.statusColumnCallback.bind(this)\r\n    };\r\n  }\r\n\r\n  getElementValue(result, col) {\r\n    let columnName = '';\r\n    if (this.media.isActive('xs')) {\r\n      columnName = `${col}: `;\r\n    }\r\n\r\n    const callback = this.displayedColumnsCallback[col];\r\n    return columnName + callback(result);\r\n  }\r\n\r\n  getActions(result): Array<ReportActionInterface> {\r\n    const actions = [];\r\n\r\n    // Allow edit XML.\r\n    if (this.reportType === ReportType.runFiles) {\r\n      actions.push(ReportActionType.createEditXmlAction(ReportType.runs, this.getId(result)));\r\n    } else if (this.reportType === ReportType.analysisFiles) {\r\n      actions.push(ReportActionType.createEditXmlAction(ReportType.analyses, this.getId(result)));\r\n    } else if (this.reportType === ReportType.studies ||\r\n      this.reportType === ReportType.projects) {\r\n      actions.push(ReportActionType.createEditXmlAction(ReportType.projects, this.getId(result)));\r\n      // actions.push(this.createEditXmlAction(ReportType.studies, this.getSecondaryId(result)));\r\n    } else {\r\n      actions.push(ReportActionType.createEditXmlAction(this.reportType, this.getId(result)));\r\n      if (this.reportType === ReportType.runs) {\r\n        actions.push(ReportActionType.createEditXmlAction(ReportType.experiments, this.getExperimentId(result)));\r\n      }\r\n    }\r\n\r\n    // Allow navigation to studies report.\r\n    if (this.getStudyId(result)) {\r\n      actions.push(ReportActionType.createChangeReportAction(ReportType.studies, this.getStudyId(result)));\r\n    }\r\n\r\n    // Allow navigation to samples report.\r\n    if (this.getSampleId(result)) {\r\n      actions.push(ReportActionType.createChangeReportAction(ReportType.samples, this.getId(result)));\r\n    }\r\n\r\n    // Allow navigation to run report.\r\n    if (this.reportType === ReportType.studies) {\r\n      actions.push(ReportActionType.createChangeReportAction(ReportType.runs, this.getSecondaryId(result)));\r\n    }\r\n    if (this.reportType === ReportType.samples ||\r\n      this.reportType === ReportType.runFiles) {\r\n      actions.push(ReportActionType.createChangeReportAction(ReportType.runs, this.getId(result)));\r\n    }\r\n\r\n    // Allow navigation to analysis report.\r\n    if (this.reportType === ReportType.studies) {\r\n      actions.push(ReportActionType.createChangeReportAction(ReportType.analyses, this.getSecondaryId(result)));\r\n    }\r\n    if (this.reportType === ReportType.samples ||\r\n      this.reportType === ReportType.analysisFiles) {\r\n      actions.push(ReportActionType.createChangeReportAction(ReportType.analyses, this.getId(result)));\r\n    }\r\n\r\n    // Allow navigation to run files and run process.\r\n    if (this.reportType === ReportType.runs && !this.isEga()) {\r\n      actions.push(ReportActionType.createChangeReportAction(ReportType.runFiles, this.getId(result)));\r\n      actions.push(ReportActionType.createChangeReportAction(ReportType.runProcess, this.getId(result)));\r\n    }\r\n\r\n    // Allow navigation to analysis files annd analysis process.\r\n    if (this.reportType === ReportType.analyses && !this.isEga()) {\r\n      actions.push(ReportActionType.createChangeReportAction(ReportType.analysisFiles, this.getId(result)));\r\n      actions.push(ReportActionType.createChangeReportAction(ReportType.analysisProcess, this.getId(result)));\r\n    }\r\n\r\n    // Allow navigation from run process.\r\n    if (this.reportType === ReportType.runProcess) {\r\n      actions.push(ReportActionType.createChangeReportAction(ReportType.runs, this.getId(result)));\r\n      actions.push(ReportActionType.createChangeReportAction(ReportType.runFiles, this.getId(result)));\r\n    }\r\n\r\n    // Allow navigation from analysis process.\r\n    if (this.reportType === ReportType.analysisProcess) {\r\n      actions.push(ReportActionType.createChangeReportAction(ReportType.analyses, this.getId(result)));\r\n      actions.push(ReportActionType.createChangeReportAction(ReportType.analysisFiles, this.getId(result)));\r\n    }\r\n\r\n    if (this.reportType === ReportType.dacs) {\r\n      actions.push(ReportActionType.createChangeReportAction(ReportType.policies, this.getId(result)));\r\n    }\r\n\r\n    if (this.reportType === ReportType.policies) {\r\n      actions.push(ReportActionType.createChangeReportAction(ReportType.dacs, this.getDacId(result)));\r\n      actions.push(ReportActionType.createChangeReportAction(ReportType.datasets, this.getId(result)));\r\n    }\r\n    if (this.reportType === ReportType.datasets) {\r\n      actions.push(ReportActionType.createChangeReportAction(ReportType.policies, this.getPolicyId(result)));\r\n    }\r\n\r\n    return actions;\r\n  }\r\n\r\n  action(action: ReportActionInterface): void {\r\n    console.log('** action **', action);\r\n\r\n    if (action && action.reportActionType === ReportActionType.changeReport) {\r\n      // console.log('** change report action **', action);\r\n      this.reportChange.emit(action);\r\n    }\r\n\r\n    if (action && action.reportActionType === ReportActionType.editXml) {\r\n      // console.log('** edit xml action **', action);\r\n      this.editXml(action);\r\n    }\r\n\r\n  }\r\n\r\n  editXml(action: ReportActionInterface): void {\r\n\r\n    const reportDialogRef = this._reportDialog.open(ReportEditDialogComponent, {\r\n      width: '600px',\r\n      data: action\r\n    });\r\n    reportDialogRef.afterClosed().subscribe();\r\n  }\r\n\r\n  reset() {\r\n    this.active = false;\r\n    this.data = undefined;\r\n    this.dataSource = undefined;\r\n    this.dataError = undefined;\r\n    this._id = undefined;\r\n    this._status = undefined;\r\n    this._processStatus = undefined;\r\n    this._analysisType = undefined;\r\n    // this.report();\r\n  }\r\n\r\n  report() {\r\n    // console.log(\" ** report **\", this.reportType);\r\n\r\n    this.initReportColumns();\r\n    const observable: Observable<any> = this.initReportObservable('json', this.rows) as Observable<any>;\r\n\r\n    if (observable) {\r\n      this.active = true;\r\n      this.data = undefined;\r\n      this.dataError = undefined;\r\n\r\n      observable.pipe(\r\n        retry(3)\r\n      ).subscribe(\r\n        data => {\r\n          // console.log('** Webin reports service **', data);\r\n          this.data = data;\r\n          this.dataSource = new MatTableDataSource<any>(this.data);\r\n          this.dataSource.paginator = this.dataPaginator;\r\n        },\r\n        (err: HttpErrorResponse) => {\r\n          console.log('** Webin reports service failed **', err);\r\n          const msg = 'Webin reports service failed. Please try again later. If the problem persists please contact the helpdesk.';\r\n          this.dataError = msg;\r\n        },\r\n        () => {\r\n          this.active = false;\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  initReportColumns() {\r\n    if (this.reportType === ReportType.studies) {\r\n      this.setStudyReportColumns();\r\n    } else if (this.reportType === ReportType.samples) {\r\n      this.setSampleReportColumns();\r\n    } else if (this.reportType === ReportType.runs) {\r\n      this.setRunReportColumns();\r\n    } else if (this.reportType === ReportType.analyses) {\r\n      this.setAnalysisReportColumns();\r\n    } else if (this.reportType === ReportType.runFiles) {\r\n      this.setRunFileReportColumns();\r\n    } else if (this.reportType === ReportType.analysisFiles) {\r\n      this.setAnalysisFileReportColumns();\r\n    } else if (this.reportType === ReportType.runProcess) {\r\n      this.setRunProcessReportColumns();\r\n    } else if (this.reportType === ReportType.analysisProcess) {\r\n      this.setAnalysisProcessReportColumns();\r\n    } else if (this.reportType === ReportType.unsubmittedFiles) {\r\n      this.setUnsubmittedFilesReportColumns();\r\n    } else if (this.reportType === ReportType.dacs) {\r\n      this.setDacReportColumns();\r\n    } else if (this.reportType === ReportType.policies) {\r\n      this.setPolicyReportColumns();\r\n    } else if (this.reportType === ReportType.datasets) {\r\n      this.setDatasetReportColumns();\r\n    }\r\n  }\r\n\r\n  initReportObservable(format: string, rows: string) {\r\n    if (!rows) {\r\n      rows = this.rows;\r\n    }\r\n\r\n    if (this.reportType === ReportType.studies ||\r\n      this.reportType === ReportType.projects) {\r\n      if (this.id) {\r\n        return this._webinReportService.getProjects(this.id, rows, format);\r\n        // return this._webinReportService.getStudies(this.id, rows, format);\r\n      }\r\n      return this._webinReportService.getProjectsAll(this._status, rows, format);\r\n      // return this._webinReportService.getStudiesAll(this._status, rows, format);\r\n    }\r\n\r\n    if (this.reportType === ReportType.samples) {\r\n      if (this.id) {\r\n        return this._webinReportService.getSamples(this.id, rows, format);\r\n      }\r\n      return this._webinReportService.getSamplesAll(this._status, rows, format);\r\n    }\r\n\r\n    if (this.reportType === ReportType.runs) {\r\n      if (this.id) {\r\n        return this._webinReportService.getRuns(this.id, rows, format);\r\n      }\r\n      return this._webinReportService.getRunsAll(this._status, rows, format);\r\n    }\r\n\r\n    if (this.reportType === ReportType.analyses) {\r\n      if (this.id) {\r\n        return this._webinReportService.getAnalyses(this.id, rows, format);\r\n      }\r\n      return this._webinReportService.getAnalysesAll(this._status, this._analysisType, rows, format);\r\n    }\r\n\r\n    if (this.reportType === ReportType.runFiles) {\r\n      if (this.id) {\r\n        return this._webinReportService.getRunFiles(this.id, rows, format);\r\n      }\r\n      return this._webinReportService.getRunFilesAll(this._processStatus, rows, format);\r\n    }\r\n\r\n    if (this.reportType === ReportType.analysisFiles) {\r\n      if (this.id) {\r\n        return this._webinReportService.getAnalysisFiles(this.id, rows, format);\r\n      }\r\n      return this._webinReportService.getAnalysisFilesAll(this._analysisType, this._processStatus, rows, format);\r\n    }\r\n\r\n    if (this.reportType === ReportType.runProcess) {\r\n      if (this.id) {\r\n        return this._webinReportService.getRunProcess(this.id, rows, format);\r\n      }\r\n      return this._webinReportService.getRunProcessAll(this._processStatus, rows, format);\r\n    }\r\n\r\n    if (this.reportType === ReportType.analysisProcess) {\r\n      if (this.id) {\r\n        return this._webinReportService.getAnalysisProcess(this.id, rows, format);\r\n      }\r\n      return this._webinReportService.getAnalysisProcessAll(this._analysisType, this._processStatus, rows, format);\r\n    }\r\n\r\n    if (this.reportType === ReportType.unsubmittedFiles) {\r\n      return this._webinReportService.getUnsubmittedFilesAll(this.id, rows, format);\r\n    }\r\n\r\n    if (this.reportType === ReportType.dacs) {\r\n      if (this.id) {\r\n        return this._webinReportService.getDacs(this.id, rows, format);\r\n      }\r\n      return this._webinReportService.getDacsAll(this._status, rows, format);\r\n    }\r\n\r\n    if (this.reportType === ReportType.policies) {\r\n      if (this.id) {\r\n        return this._webinReportService.getPolicies(this.id, rows, format);\r\n      }\r\n      return this._webinReportService.getPoliciesAll(this._status, rows, format);\r\n    }\r\n\r\n    if (this.reportType === ReportType.datasets) {\r\n      if (this.id) {\r\n        return this._webinReportService.getDatasets(this.id, rows, format);\r\n      }\r\n      return this._webinReportService.getDatasetsAll(this._status, rows, format);\r\n    }\r\n  }\r\n\r\n\r\n  // Id getters\r\n  //\r\n\r\n  getId(result) {\r\n    if (result.report.egaId) {\r\n      return result.report.egaId;\r\n    }\r\n    return result.report.id;\r\n  }\r\n\r\n  getStudyId(result) {\r\n    if (result.report.studyEgaId) {\r\n      return result.report.studyEgaId;\r\n    }\r\n    return result.report.studyId;\r\n  }\r\n\r\n  getSampleId(result) {\r\n    if (result.report.sampleEgaId) {\r\n      return result.report.sampleEgaId;\r\n    }\r\n    return result.report.sampleId;\r\n  }\r\n\r\n  getExperimentId(result) {\r\n    if (result.report.experimentEgaId) {\r\n      return result.report.experimentEgaId;\r\n    }\r\n    return result.report.experimentId;\r\n  }\r\n\r\n  getDacId(result) {\r\n    return result.report.egaDacId;\r\n  }\r\n\r\n  getPolicyId(result) {\r\n    return result.report.egaPolicyId;\r\n  }\r\n\r\n  getSecondaryId(result) {\r\n    return result.report.secondaryId;\r\n  }\r\n\r\n  removeNullAndUndefined(value) {\r\n    if (value === null || value === undefined) {\r\n      return '';\r\n    }\r\n    return value;\r\n  }\r\n\r\n  // Column callbacks\r\n  //\r\n\r\n  accessionColumnCallback(result) {\r\n    return this.removeNullAndUndefined(this.getId(result));\r\n  }\r\n\r\n  aliasColumnCallback(result) {\r\n    return this.removeNullAndUndefined(result.report.alias);\r\n  }\r\n\r\n  studyColumnCallback(result) {\r\n    return this.removeNullAndUndefined(this.getStudyId(result));\r\n  }\r\n\r\n  sampleColumnCallback(result) {\r\n    return this.removeNullAndUndefined(this.getSampleId(result));\r\n  }\r\n\r\n  experimentColumnCallback(result) {\r\n    return this.removeNullAndUndefined(this.getExperimentId(result));\r\n  }\r\n\r\n  humanReadableFormat(token: string) {\r\n    if (token) {\r\n      let str: string = token.toLowerCase();\r\n      str = str.replace(/_/g, ' ');\r\n      return str.charAt(0).toUpperCase() + str.slice(1);\r\n    }\r\n    return token;\r\n  }\r\n\r\n  analysisTypeColumnCallback(result) {\r\n    return this.humanReadableFormat(this.removeNullAndUndefined(result.report.analysisType));\r\n  }\r\n\r\n  processingStatusColumnCallback(result) {\r\n    return this.removeNullAndUndefined(result.report.processingStatus);\r\n  }\r\n\r\n  processingErrorColumnCallback(result) {\r\n    return this.removeNullAndUndefined(result.report.processingError);\r\n  }\r\n\r\n  processingAccessionColumnCallback(result) {\r\n    return this.removeNullAndUndefined(result.report.acc);\r\n  }\r\n\r\n  dateFormat(date: Date) {\r\n    const month = [\r\n      'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',\r\n      'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\r\n    const day = date.getDate();\r\n    let daySuffix: string;\r\n    if (day > 3 && day < 21) {\r\n      daySuffix = 'th';\r\n    } else {\r\n      switch (day % 10) {\r\n        case 1: daySuffix = 'st'; break;\r\n        case 2: daySuffix = 'nd'; break;\r\n        case 3: daySuffix = 'rd'; break;\r\n        default: daySuffix = 'th';\r\n      }\r\n    }\r\n\r\n    return date.getDate() + daySuffix + ' ' +\r\n      month[date.getMonth()] + ' ' +\r\n      date.getFullYear();\r\n  }\r\n\r\n  submissionDateColumnCallback(result) {\r\n    if (result.report.firstCreated) {\r\n      const date: Date = new Date(result.report.firstCreated);\r\n      return this.dateFormat(date);\r\n    }\r\n    return '';\r\n  }\r\n\r\n  releaseDateColumnCallback(result) {\r\n    if (result.report.holdDate) {\r\n      const date: Date = new Date(result.report.holdDate);\r\n      return this.dateFormat(date);\r\n    }\r\n    return '';\r\n  }\r\n\r\n  uploadDateColumnCallback(result) {\r\n    if (result.report.uploadDate) {\r\n      const date: Date = new Date(result.report.uploadDate);\r\n      return this.dateFormat(date);\r\n    }\r\n    return '';\r\n  }\r\n\r\n  expirationDateColumnCallback(result) {\r\n    if (result.report.expirationDate) {\r\n      const date: Date = new Date(result.report.expirationDate);\r\n      return this.dateFormat(date);\r\n    }\r\n    return '';\r\n  }\r\n\r\n  statusColumnCallback(result) {\r\n    return this.removeNullAndUndefined(this.humanReadableFormat(result.report.releaseStatus));\r\n  }\r\n\r\n  fileNameColumnCallback(result) {\r\n    return this.removeNullAndUndefined(result.report.fileName);\r\n  }\r\n\r\n  fileSizeColumnCallback(result) {\r\n    return this.removeNullAndUndefined(result.report.bytes);\r\n  }\r\n\r\n  fileChecksumMethodColumnCallback(result) {\r\n    return this.removeNullAndUndefined(result.report.checksumMethod);\r\n  }\r\n\r\n  fileChecksumColumnCallback(result) {\r\n    return this.removeNullAndUndefined(result.report.checksum);\r\n  }\r\n\r\n  fileFormatColumnCallback(result) {\r\n    return this.removeNullAndUndefined(result.report.fileFormat);\r\n  }\r\n\r\n  fileArchiveStatusColumnCallback(result) {\r\n    return this.removeNullAndUndefined(result.report.archiveStatus);\r\n  }\r\n\r\n  secondaryIdColumnCallback(result) {\r\n    return this.removeNullAndUndefined(this.getSecondaryId(result));\r\n  }\r\n\r\n  titleColumnCallback(result) {\r\n    return this.removeNullAndUndefined(result.report.title);\r\n  }\r\n\r\n  organismColumnCallback(result) {\r\n    return this.removeNullAndUndefined(result.report.scientificName);\r\n  }\r\n\r\n  taxIdColumnCallback(result) {\r\n    return this.removeNullAndUndefined(result.report.taxId);\r\n  }\r\n\r\n  instrumentColumnCallback(result) {\r\n    return this.removeNullAndUndefined(result.report.instrumentModel);\r\n  }\r\n\r\n  dacColumnCallback(result) {\r\n    return this.removeNullAndUndefined(this.getDacId(result));\r\n  }\r\n\r\n  policyColumnCallback(result) {\r\n    return this.removeNullAndUndefined(this.getPolicyId(result));\r\n  }\r\n\r\n  csvDownloadAllLink() {\r\n    return this.initReportObservable('csv', '10000000');\r\n  }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3N1Ym1pc3Npb24tcmVzdWx0LWRpYWxvZy9zdWJtaXNzaW9uLXJlc3VsdC1kaWFsb2cuY29tcG9uZW50LmNzcyJ9 */\"","module.exports = \"<h2 mat-dialog-title>Submission result</h2>\\r\\n\\r\\n<mat-dialog-content>\\r\\n\\r\\n  <app-submission-result #submissionResult></app-submission-result>\\r\\n\\r\\n</mat-dialog-content>\\r\\n\\r\\n<mat-dialog-actions>\\r\\n\\r\\n  <button mat-button color=\\\"primary\\\" [mat-dialog-close]=\\\"true\\\">Close</button>\\r\\n\\r\\n</mat-dialog-actions>\\r\\n\"","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\n\r\nimport { Component, OnInit, Inject, ViewChild } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { SubmissionResultComponent } from '../submission-result/submission-result.component';\r\nimport {  MatDialogRef, MAT_DIALOG_DATA} from '@angular/material';\r\n\r\n@Component({\r\n  selector: 'app-submission-result-dialog',\r\n  templateUrl: './submission-result-dialog.component.html',\r\n  styleUrls: ['./submission-result-dialog.component.css']\r\n})\r\nexport class SubmissionResultDialogComponent implements OnInit {\r\n\r\n  @ViewChild(SubmissionResultComponent) submissionResult: SubmissionResultComponent;\r\n\r\n  constructor(\r\n    public dialogRef: MatDialogRef<SubmissionResultDialogComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: Observable<string>) {}\r\n\r\n    ngOnInit() {\r\n      this.submissionResult.submit(this.data);\r\n    }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3N1Ym1pc3Npb24tcmVzdWx0L3N1Ym1pc3Npb24tcmVzdWx0LmNvbXBvbmVudC5jc3MifQ== */\"","module.exports = \"<div *ngIf=\\\"active\\\" style=\\\"height:70px;\\\">\\r\\n    <mat-spinner [diameter]=\\\"50\\\" [strokeWidth]=\\\"5\\\" style=\\\"margin:0 auto;\\\">\\r\\n    </mat-spinner>\\r\\n</div>\\r\\n\\r\\n<div *ngIf=\\\"resultError\\\">\\r\\n  <div class=\\\"app-error\\\">\\r\\n      <i class=\\\"material-icons\\\">error</i>\\r\\n      {{resultError}}\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div *ngIf=\\\"isResult()\\\">\\r\\n\\r\\n  <!-- Show success or failure message -->\\r\\n\\r\\n  <div *ngIf=\\\"webinErrorDataSource\\\">\\r\\n    <div class=\\\"app-error\\\">\\r\\n        <i class=\\\"material-icons\\\">error</i>\\r\\n        Submission failed.\\r\\n    </div>\\r\\n  </div>\\r\\n  <div *ngIf=\\\"webinAccessionDataSource\\\">\\r\\n    <div class=\\\"app-success\\\">\\r\\n        <i class=\\\"material-icons\\\">done</i>\\r\\n        The submission was successful.\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n</div>\\r\\n\\r\\n<div *ngIf=\\\"showReceipt()\\\">\\r\\n\\r\\n  <!-- Show receipt -->\\r\\n\\r\\n  <div class=\\\"container\\\"\\r\\n       fxLayout=\\\"row wrap\\\">\\r\\n    <div class=\\\"app-field-padding\\\">\\r\\n        <mat-checkbox [(ngModel)]=\\\"showReceiptXml\\\">\\r\\n          Show receipt XML\\r\\n        </mat-checkbox>\\r\\n    </div>\\r\\n\\r\\n    <div fxFlex>\\r\\n   </div>\\r\\n\\r\\n   <div *ngIf=\\\"webinErrorDataSource\\\" class=\\\"app-field-padding\\\">\\r\\n     <button mat-raised-button color=\\\"accent\\\" (click)=\\\"downloadErrorTable()\\\">\\r\\n       Download errors\\r\\n     </button>\\r\\n   </div>\\r\\n\\r\\n   <div *ngIf=\\\"webinAccessionDataSource\\\" class=\\\"app-field-padding\\\">\\r\\n     <button mat-raised-button color=\\\"accent\\\" (click)=\\\"downloadAccessionTable()\\\">\\r\\n       Download accessions\\r\\n     </button>\\r\\n   </div>\\r\\n\\r\\n    <div class=\\\"app-field-padding\\\">\\r\\n      <button mat-raised-button color=\\\"accent\\\" (click)=\\\"downloadReceiptXml()\\\">\\r\\n        Download receipt XML\\r\\n      </button>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <!-- Show errors -->\\r\\n\\r\\n  <div *ngIf=\\\"webinErrorDataSource\\\">\\r\\n\\r\\n    <div *ngIf=\\\"!showReceiptXml\\\" class=\\\"app-submission-result-container\\\">\\r\\n\\r\\n      <table cdk-table #webinErrorTable [dataSource]=\\\"webinErrorDataSource\\\" >\\r\\n\\r\\n        <ng-container cdkColumnDef=\\\"error\\\">\\r\\n          <th cdk-header-cell *cdkHeaderCellDef><span class=\\\"app-table-header\\\">Error message</span></th>\\r\\n          <td cdk-cell *cdkCellDef=\\\"let element\\\">{{element.error}}</td>\\r\\n        </ng-container>\\r\\n        <tr cdk-header-row *cdkHeaderRowDef=\\\"webinErrorTableColumns\\\"></tr>\\r\\n        <tr cdk-row *cdkRowDef=\\\"let row; columns: webinErrorTableColumns;\\\"></tr>\\r\\n\\r\\n      </table>\\r\\n\\r\\n    </div>\\r\\n\\r\\n    <div *ngIf=\\\"showReceiptXml\\\">\\r\\n      <div class=\\\"app-receipt app-submission-result-container\\\">\\r\\n        <pre>{{result.xml}}</pre>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n  </div> <!-- <div *ngIf=\\\"webinErrorDataSource\\\"> -->\\r\\n\\r\\n  <!-- Show accessions -->\\r\\n\\r\\n  <div *ngIf=\\\"webinAccessionDataSource\\\">\\r\\n\\r\\n    <div *ngIf=\\\"!showReceiptXml\\\" class=\\\"app-submission-result-container\\\">\\r\\n\\r\\n      <table cdk-table #webinAccessionTable [dataSource]=\\\"webinAccessionDataSource\\\" >\\r\\n\\r\\n        <ng-container cdkColumnDef=\\\"type\\\">\\r\\n          <th cdk-header-cell  *cdkHeaderCellDef><span class=\\\"app-table-header\\\">Type</span></th>\\r\\n          <td cdk-cell *cdkCellDef=\\\"let element\\\">\\r\\n            <span *ngIf=\\\"media.isActive('xs')\\\">Type:</span>\\r\\n            {{humanReadableFormat(element.type)}}\\r\\n          </td>\\r\\n        </ng-container>\\r\\n\\r\\n        <ng-container cdkColumnDef=\\\"accession\\\">\\r\\n          <th cdk-header-cell  *cdkHeaderCellDef><span class=\\\"app-table-header\\\">Accession</span></th>\\r\\n          <td cdk-cell *cdkCellDef=\\\"let element\\\">\\r\\n            <span *ngIf=\\\"media.isActive('xs')\\\">Accession:</span>\\r\\n            {{element.accession}}\\r\\n          </td>\\r\\n        </ng-container>\\r\\n\\r\\n        <ng-container cdkColumnDef=\\\"alias\\\">\\r\\n          <th cdk-header-cell  *cdkHeaderCellDef><span class=\\\"app-table-header\\\">Unique name (alias)</span></th>\\r\\n          <td cdk-cell *cdkCellDef=\\\"let element\\\">\\r\\n            <span *ngIf=\\\"media.isActive('xs')\\\">Unique name (Alias):</span>\\r\\n            {{element.alias}}\\r\\n          </td>\\r\\n        </ng-container>\\r\\n\\r\\n        <tr cdk-header-row *cdkHeaderRowDef=\\\"webinAccessionTableColumns\\\"></tr>\\r\\n        <tr cdk-row *cdkRowDef=\\\"let row; columns: webinAccessionTableColumns;\\\"></tr>\\r\\n\\r\\n      </table>\\r\\n\\r\\n    </div>\\r\\n\\r\\n    <div *ngIf=\\\"showReceiptXml\\\">\\r\\n      <div class=\\\"app-receipt app-submission-result-container\\\">\\r\\n        <pre>{{result.xml}}</pre>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n  </div> <!-- <div *ngIf=\\\"webinErrorDataSource\\\"> -->\\r\\n\\r\\n  <div [hidden]=\\\"!webinErrorDataSource\\\">\\r\\n    <!-- the paginator must be created before the dataSource has been defined -->\\r\\n    <div *ngIf=\\\"!showReceiptXml\\\">\\r\\n\\r\\n      <mat-paginator #webinErrorPaginator\\r\\n                     [pageSize]=\\\"10\\\"\\r\\n                     [pageSizeOptions]=\\\"[10, 25, 50]\\\">\\r\\n      </mat-paginator>\\r\\n\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n\\r\\n  <div [hidden]=\\\"!webinAccessionDataSource\\\">\\r\\n    <!-- the paginator must be created before the dataSource has been defined -->\\r\\n    <mat-paginator #webinAccessionPaginator\\r\\n                   [pageSize]=\\\"10\\\"\\r\\n                   [pageSizeOptions]=\\\"[10, 25, 50]\\\">\\r\\n    </mat-paginator>\\r\\n\\r\\n  </div>\\r\\n\\r\\n</div> <!-- <div *ngIf=\\\"showReceipt()\\\"> -->\\r\\n\"","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\n\r\nimport { Component, ViewChild, ViewEncapsulation, Input } from '@angular/core';\r\nimport { MatPaginator, MatTableDataSource } from '@angular/material';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { ObservableMedia } from '@angular/flex-layout';\r\n\r\nimport { WebinRestService } from '../webin-rest.service';\r\n\r\nimport {Observable} from 'rxjs';\r\nimport { retry } from 'rxjs/operators';\r\n\r\nimport {saveAs as importedSaveAs} from 'file-saver';\r\n\r\nexport interface WebinError {\r\n  error: string;\r\n}\r\n\r\nexport interface WebinAccession {\r\n  type: string;\r\n  accession: string;\r\n  alias: string;\r\n}\r\n@Component({\r\n  selector: 'app-submission-result',\r\n  templateUrl: './submission-result.component.html',\r\n  styleUrls: ['./submission-result.component.css'],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class SubmissionResultComponent {\r\n\r\n  webinErrorTableColumns = ['error'];\r\n  webinAccessionTableColumns = ['type', 'accession', 'alias'];\r\n  webinErrorDataSource;\r\n  webinAccessionDataSource;\r\n  @ViewChild(MatPaginator) webinErrorPaginator: MatPaginator;\r\n  @ViewChild(MatPaginator) webinAccessionPaginator: MatPaginator;\r\n  result;\r\n  resultError;\r\n  showReceiptXml = false;\r\n  @Input() showReceiptSuccess = true;\r\n  active: boolean;\r\n\r\n  constructor(\r\n    private _webinRestService: WebinRestService,\r\n    public media: ObservableMedia) { }\r\n\r\n  isResult(): boolean {\r\n    return this.result ? true : false;\r\n  }\r\n\r\n  isError(): boolean {\r\n    return this.result.isError;\r\n  }\r\n\r\n  showReceipt(): boolean {\r\n    if (!this.isResult()) { return false; }\r\n    if (this.isError()) { return true; }\r\n    return this.showReceiptSuccess;\r\n  }\r\n\r\n  reset() {\r\n    this.webinErrorDataSource = undefined;\r\n    this.webinAccessionDataSource = undefined;\r\n    this.result = undefined;\r\n    this.resultError = undefined;\r\n  }\r\n\r\n  submit(observable: Observable<string>) {\r\n    if (observable) {\r\n      this.reset();\r\n      this.active = true;\r\n\r\n      observable.pipe(\r\n        retry(3)\r\n      ).subscribe(\r\n        data => {\r\n            // HttpResponse when using {observe: 'response'}\r\n            this.result = this._webinRestService.parseResult(data);\r\n            // console.log('** Webin submission **', this.result);\r\n\r\n            if (this.result.isError) {\r\n              this.webinErrorDataSource = new MatTableDataSource<WebinError>(this.result.errors);\r\n              this.webinErrorDataSource.paginator = this.webinErrorPaginator;\r\n            } else {\r\n              this.webinAccessionDataSource = new MatTableDataSource<WebinAccession>(this.result.accessions);\r\n              this.webinAccessionDataSource.paginator = this.webinAccessionPaginator;\r\n            }\r\n        },\r\n        (err: HttpErrorResponse) => {\r\n          console.error('** Webin submission service failed **', err);\r\n          const msg = 'Webin submission service failed. Please try again later. If the problem persists please contact the helpdesk.';\r\n          this.resultError = msg;\r\n      },\r\n    () => {\r\n      this.active = false;\r\n    });\r\n    }\r\n  }\r\n\r\n  downloadReceiptXml() {\r\n    const blob = new Blob([this.result.xml], {type: 'text/plain;charset=utf-8'});\r\n    importedSaveAs(blob, 'Webin-receipt-' + this.result.date + '.xml');\r\n  }\r\n\r\n  downloadErrorTable() {\r\n    if (this.result.errors) {\r\n      const arr = [];\r\n      arr.push('ERROR');\r\n      this.result.errors.forEach( error => arr.push( error.error ));\r\n\r\n      const blob = new Blob([arr.join('\\n')], {type: 'text/plain;charset=utf-8'});\r\n      importedSaveAs(blob, 'Webin-errors-' + this.result.date + '.txt');\r\n    }\r\n  }\r\n\r\n  downloadAccessionTable() {\r\n    if (this.result.accessions) {\r\n      const arr = [];\r\n      arr.push('TYPE\\tACCESSION\\tALIAS');\r\n      this.result.accessions.forEach( accession => arr.push(\r\n          `${accession.type}\\t${accession.accession}\\t${accession.alias}`\r\n      ));\r\n\r\n      const blob = new Blob([arr.join('\\n')], {type: 'text/plain;charset=utf-8'});\r\n      importedSaveAs(blob, 'Webin-accessions-' + this.result.date + '.txt');\r\n    }\r\n  }\r\n\r\n  humanReadableFormat(token: string) {\r\n    if (token) {\r\n      const str: string = token.toLowerCase();\r\n      return str.charAt(0).toUpperCase() + str.slice(1);\r\n    }\r\n    return token;\r\n  }\r\n}\r\n","module.exports = \".component-margin {\\r\\n    margin-top: 5px;\\r\\n    margin-right: 5px;\\r\\n    margin-bottom: 5px;\\r\\n    margin-left: 5px;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvc3VibWl0L3N1Ym1pdC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksZUFBZTtJQUNmLGlCQUFpQjtJQUNqQixrQkFBa0I7SUFDbEIsZ0JBQWdCO0FBQ3BCIiwiZmlsZSI6InNyYy9hcHAvc3VibWl0L3N1Ym1pdC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbXBvbmVudC1tYXJnaW4ge1xyXG4gICAgbWFyZ2luLXRvcDogNXB4O1xyXG4gICAgbWFyZ2luLXJpZ2h0OiA1cHg7XHJcbiAgICBtYXJnaW4tYm90dG9tOiA1cHg7XHJcbiAgICBtYXJnaW4tbGVmdDogNXB4O1xyXG59XHJcbiJdfQ== */\"","module.exports = \"<!--\\r\\n  ~ Copyright 2018 EMBL - European Bioinformatics Institute\\r\\n  ~ Licensed under the Apache License, Version 2.0 (the \\\"License\\\"); you may not use this\\r\\n  ~ file except in compliance with the License. You may obtain a copy of the License at\\r\\n  ~ http://www.apache.org/licenses/LICENSE-2.0\\r\\n  ~ Unless required by applicable law or agreed to in writing, software distributed under the\\r\\n  ~ License is distributed on an \\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR\\r\\n  ~ CONDITIONS OF ANY KIND, either express or implied. See the License for the\\r\\n  ~ specific language governing permissions and limitations under the License.\\r\\n  -->\\r\\n\\r\\n<div class=\\\"component-margin\\\">\\r\\n\\r\\n  <div>\\r\\n    <p>\\r\\n      <span class=\\\"app-primary-color\\\">\\r\\n        <i class=\\\"material-icons\\\">info</i>\\r\\n      </span>\\r\\n      This page is used for making new submissions. To access other functionality please select one of the other pages\\r\\n      above.\\r\\n    </p>\\r\\n  </div>\\r\\n\\r\\n  <mat-accordion>\\r\\n    <mat-expansion-panel>\\r\\n      <mat-expansion-panel-header>\\r\\n        <mat-panel-title>\\r\\n          <b>Submit XML files</b>\\r\\n        </mat-panel-title>\\r\\n      </mat-expansion-panel-header>\\r\\n\\r\\n      <p>\\r\\n        Use this submission option to make any type of Webin submission using XML files.\\r\\n      </p>\\r\\n\\r\\n      <div class=\\\"container\\\" fxLayout fxLayout.xs=\\\"column\\\" fxLayoutAlign=\\\"space-around start\\\" fxLayoutGap=\\\"10px\\\">\\r\\n        <div fxFlex=\\\"33\\\">\\r\\n          Submission XML (mandatory)\\r\\n          <input type=\\\"file\\\" class=\\\"app-choose-file\\\" #submissionFile\\r\\n            (change)=\\\"onChangeSubmissionFile(submissionFile.files)\\\" />\\r\\n          Study XML\\r\\n          <input type=\\\"file\\\" class=\\\"app-choose-file\\\" #studyFile (change)=\\\"onChangeStudyFile(studyFile.files)\\\" />\\r\\n          Project XML\\r\\n          <input type=\\\"file\\\" class=\\\"app-choose-file\\\" #projectFile (change)=\\\"onChangeProjectFile(projectFile.files)\\\" />\\r\\n          Sample XML\\r\\n          <input type=\\\"file\\\" class=\\\"app-choose-file\\\" #sampleFile (change)=\\\"onChangeSampleFile(sampleFile.files)\\\" />\\r\\n        </div>\\r\\n        <div fxFlex=\\\"33\\\">\\r\\n          Experiment XML\\r\\n          <input type=\\\"file\\\" class=\\\"app-choose-file\\\" #experimentFile\\r\\n            (change)=\\\"onChangeExperimentFile(experimentFile.files)\\\" />\\r\\n          Run XML\\r\\n          <input type=\\\"file\\\" class=\\\"app-choose-file\\\" #runFile (change)=\\\"onChangeRunFile(runFile.files)\\\" />\\r\\n          Analysis XML\\r\\n          <input type=\\\"file\\\" class=\\\"app-choose-file\\\" #analysisFile\\r\\n            (change)=\\\"onChangeAnalysisFile(analysisFile.files)\\\" />\\r\\n        </div>\\r\\n\\r\\n        <div *ngIf=\\\"isEga()\\\">\\r\\n          <div fxFlex>\\r\\n            EGA DAC XML\\r\\n            <input type=\\\"file\\\" class=\\\"app-choose-file\\\" #dacFile (change)=\\\"onChangeDacFile(dacFile.files)\\\" />\\r\\n            EGA Policy XML\\r\\n            <input type=\\\"file\\\" class=\\\"app-choose-file\\\" #policyFile (change)=\\\"onChangePolicyFile(policyFile.files)\\\" />\\r\\n            EGA Dataset XML\\r\\n            <input type=\\\"file\\\" class=\\\"app-choose-file\\\" #datasetFile (change)=\\\"onChangeDatasetFile(datasetFile.files)\\\" />\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <button mat-raised-button color=\\\"accent\\\" [disabled]=\\\"!canSubmit()\\\" (click)=\\\"submit()\\\">Submit</button>\\r\\n    </mat-expansion-panel>\\r\\n\\r\\n    <ng-container *ngIf=\\\"!isEga()\\\">\\r\\n      <app-checklist [checklistType]=\\\"ChecklistType.sequence\\\" [init]=\\\"false\\\"></app-checklist>\\r\\n    </ng-container>\\r\\n  </mat-accordion>\\r\\n\\r\\n</div> <!-- component-margin -->\\r\\n\"","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\n\r\nimport { Component, ViewEncapsulation } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { ChecklistType } from '../checklist-type.enum';\r\nimport { WebinAuthenticationService } from '../webin-authentication.service';\r\nimport { WebinRestService } from '../webin-rest.service';\r\nimport { MatDialog } from '@angular/material';\r\nimport { SubmissionResultDialogComponent } from '../submission-result-dialog/submission-result-dialog.component';\r\n\r\n@Component({\r\n  selector: 'app-submit',\r\n  templateUrl: './submit.component.html',\r\n  styleUrls: ['./submit.component.css'],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class SubmitComponent {\r\n\r\n  ChecklistType = ChecklistType;   // Allows use in template\r\n\r\n  submissionFile: File;\r\n  studyFile: File;\r\n  projectFile: File;\r\n  sampleFile: File;\r\n  experimentFile: File;\r\n  runFile: File;\r\n  analysisFile: File;\r\n  dacFile: File;\r\n  policyFile: File;\r\n  datasetFile: File;\r\n\r\n  constructor(\r\n    private _webinAuthenticationService: WebinAuthenticationService,\r\n    private _webinRestService: WebinRestService,\r\n    public dialog: MatDialog) { }\r\n\r\n  isEga(): boolean {\r\n    return this._webinAuthenticationService.ega;\r\n  }\r\n\r\n  onChangeSubmissionFile(files) {\r\n    this.submissionFile = files[0];\r\n    // console.log(\"Submission file: \" + this.submissionFile);\r\n  }\r\n\r\n  onChangeStudyFile(files) {\r\n    this.studyFile = files[0];\r\n    // console.log(\"Study file: \" + this.studyFile);\r\n  }\r\n\r\n  onChangeProjectFile(files) {\r\n    this.projectFile = files[0];\r\n    // console.log(\"Project file: \" + this.projectFile);\r\n  }\r\n\r\n  onChangeSampleFile(files) {\r\n    this.sampleFile = files[0];\r\n    // console.log(\"Sample file: \" + this.sampleFile);\r\n  }\r\n\r\n  onChangeExperimentFile(files) {\r\n    this.experimentFile = files[0];\r\n    // console.log(\"Experiment file: \" + this.experimentFile);\r\n  }\r\n\r\n  onChangeRunFile(files) {\r\n    this.runFile = files[0];\r\n    // console.log(\"Run file: \" + this.runFile);\r\n  }\r\n\r\n  onChangeAnalysisFile(files) {\r\n    this.analysisFile = files[0];\r\n    // console.log(\"Analysis file: \" + this.analysisFile);\r\n  }\r\n\r\n  onChangeDacFile(files) {\r\n    this.dacFile = files[0];\r\n    // console.log(\"Dac file: \" + this.dacFile);\r\n  }\r\n\r\n  onChangePolicyFile(files) {\r\n    this.policyFile = files[0];\r\n    // console.log(\"Policy file: \" + this.policyFile);\r\n  }\r\n\r\n  onChangeDatasetFile(files) {\r\n    this.datasetFile = files[0];\r\n    // console.log(\"Dataset file: \" + this.datasetFile);\r\n  }\r\n\r\n  canSubmit() {\r\n    return this.submissionFile ? true : false;\r\n  }\r\n\r\n  submit() {\r\n    console.log('** Webin XML submission **');\r\n\r\n    const observable: Observable<string> =\r\n      this._webinRestService.submitXml(\r\n        this.submissionFile,\r\n        this.studyFile,\r\n        this.projectFile,\r\n        this.sampleFile,\r\n        this.experimentFile,\r\n        this.runFile,\r\n        this.analysisFile,\r\n        this.dacFile,\r\n        this.policyFile,\r\n        this.datasetFile);\r\n\r\n    this.dialog.open(SubmissionResultDialogComponent, {\r\n      width: '600px',\r\n      data: observable\r\n    });\r\n  }\r\n}\r\n","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { FlexLayoutModule } from '@angular/flex-layout';\r\nimport { CdkTableModule } from '@angular/cdk/table';\r\nimport {\r\n  MatAutocompleteModule,\r\n  MatButtonModule,\r\n  MatButtonToggleModule,\r\n  MatCardModule,\r\n  MatCheckboxModule,\r\n  MatChipsModule,\r\n  MatDatepickerModule,\r\n  MatDialogModule,\r\n  MatExpansionModule,\r\n  MatGridListModule,\r\n  MatIconModule,\r\n  MatInputModule,\r\n  MatListModule,\r\n  MatMenuModule,\r\n  MatNativeDateModule,\r\n  MatPaginatorModule,\r\n  MatProgressBarModule,\r\n  MatProgressSpinnerModule,\r\n  MatRadioModule,\r\n  MatRippleModule,\r\n  MatSelectModule,\r\n  MatSidenavModule,\r\n  MatSliderModule,\r\n  MatSlideToggleModule,\r\n  MatSnackBarModule,\r\n  MatSortModule,\r\n  MatTableModule,\r\n  MatTabsModule,\r\n  MatToolbarModule,\r\n  MatTooltipModule,\r\n  MatStepperModule,\r\n} from '@angular/material';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  declarations: [],\r\n  exports: [\r\n    BrowserAnimationsModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    FlexLayoutModule,\r\n    CdkTableModule,\r\n    MatAutocompleteModule,\r\n    MatButtonModule,\r\n    MatButtonToggleModule,\r\n    MatCardModule,\r\n    MatCheckboxModule,\r\n    MatChipsModule,\r\n    MatDatepickerModule,\r\n    MatDialogModule,\r\n    MatExpansionModule,\r\n    MatGridListModule,\r\n    MatIconModule,\r\n    MatInputModule,\r\n    MatListModule,\r\n    MatMenuModule,\r\n    MatNativeDateModule,\r\n    MatPaginatorModule,\r\n    MatProgressBarModule,\r\n    MatProgressSpinnerModule,\r\n    MatRadioModule,\r\n    MatRippleModule,\r\n    MatSelectModule,\r\n    MatSidenavModule,\r\n    MatSliderModule,\r\n    MatSlideToggleModule,\r\n    MatSnackBarModule,\r\n    MatSortModule,\r\n    MatTableModule,\r\n    MatTabsModule,\r\n    MatToolbarModule,\r\n    MatTooltipModule,\r\n    MatStepperModule,\r\n  ]\r\n})\r\nexport class UiModule { }\r\n","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\n\r\nimport { Injectable } from '@angular/core';\r\nimport { CanActivate, Router, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\r\nimport { WebinAuthenticationService } from './webin-authentication.service';\r\n\r\n@Injectable()\r\nexport class WebinAuthenticationGuardService implements CanActivate {\r\n\r\n  constructor(private webinAuthenticationService: WebinAuthenticationService, private router: Router) {}\r\n\r\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean {\r\n    // console.log('WebinAuthenticationGuardService.canActivate');\r\n    if (this.webinAuthenticationService.authenticated) {\r\n      if (new Date() >=\r\n          this.webinAuthenticationService.logoutDate) {\r\n        // console.log('WebinAuthenticationGuardService: authentication timeout');\r\n        this.webinAuthenticationService.logout();\r\n        this.router.navigate(['login']);\r\n        return false;\r\n      } else {\r\n        // console.log('WebinAuthenticationGuardService: authenticated');\r\n        return true;\r\n      }\r\n    }\r\n\r\n    // console.log('WebinAuthenticationGuardService: not authenticated');\r\n\r\n    const url = state.url;\r\n    if (url.startsWith(\"/?page=\")) {\r\n    // console.log('WebinAuthenticationGuardService: set redirectUrl', url);\r\n      this.webinAuthenticationService.redirectUrl = url;\r\n    }\r\n    this.router.navigate(['login']);\r\n    return false;\r\n  }\r\n}\r\n","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\n\r\nimport {Injectable, Injector} from '@angular/core';\r\nimport {HttpEvent, HttpInterceptor, HttpHandler, HttpRequest} from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { WebinAuthenticationService } from './webin-authentication.service';\r\nimport { environment } from '../environments/environment';\r\n\r\n@Injectable()\r\nexport class WebinAuthenticationInterceptor implements HttpInterceptor {\r\n\r\n  constructor(private injector: Injector) {}\r\n\r\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n\r\n  console.log(req.url);\r\n    if (!req.url.startsWith(environment.webinAuthenticationServiceUrl) &&\r\n        !req.url.startsWith(environment.webinReportServiceUrl + \"/checklist-groups\") &&\r\n        !req.url.startsWith(environment.webinReportServiceUrl + \"/checklists\")) {\r\n      // console.log('Webin authentication interceptor');\r\n      const webinAuthenticationService = this.injector.get(WebinAuthenticationService);\r\n      const authReq = req.clone({headers: req.headers.set('Authorization', webinAuthenticationService.getAuthorizationTokenHeader())});\r\n      return next.handle(authReq);\r\n\r\n    } else {\r\n       return next.handle(req);\r\n    }\r\n  }\r\n}\r\n","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\n\r\n// https://medium.com/@ryanchenkie_40935/angular-webin-authentication-using-the-http-client-and-http-interceptors-2f9d1540eb8\r\n\r\nimport { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { environment } from '../environments/environment';\r\nimport { WebinAuthenticationServiceInterface } from './webin-authentication.service.interface';\r\nimport { WebinAuthenticationResultInterface } from './webin-authentication-result.interface';\r\n\r\n@Injectable()\r\nexport class WebinAuthenticationService implements WebinAuthenticationServiceInterface {\r\n\r\n  redirectUrl: string;\r\n\r\n  get username(): string {\r\n    return sessionStorage.getItem('username');\r\n  }\r\n  set username(username: string) {\r\n    sessionStorage.setItem('username', username);\r\n  }\r\n\r\n  get token(): string {\r\n    return sessionStorage.getItem('token');\r\n  }\r\n  set token(token: string) {\r\n    sessionStorage.setItem('token', token);\r\n  }\r\n\r\n  get authenticated(): boolean {\r\n    if (sessionStorage['authenticated']) {\r\n      return JSON.parse(sessionStorage.getItem('authenticated'));\r\n    }\r\n    return false;\r\n  }\r\n  set authenticated(authenticated: boolean) {\r\n    sessionStorage.setItem('authenticated', JSON.stringify(authenticated));\r\n  }\r\n\r\n  get account(): string {\r\n    return sessionStorage.getItem('account');\r\n  }\r\n  set account(account: string) {\r\n    sessionStorage.setItem('account', account);\r\n  }\r\n\r\n  get ega(): boolean {\r\n    return JSON.parse(sessionStorage.getItem('ega'));\r\n  }\r\n  set ega(ega: boolean) {\r\n    sessionStorage.setItem('ega', JSON.stringify(ega));\r\n  }\r\n\r\n  get loginDate(): Date {\r\n    return JSON.parse(sessionStorage.getItem('loginDate'));\r\n  }\r\n  set loginDate(loginDate: Date) {\r\n    sessionStorage.setItem('loginDate', JSON.stringify(loginDate));\r\n  }\r\n\r\n  get logoutDate(): Date {\r\n    return JSON.parse(sessionStorage.getItem('logoutDate'));\r\n  }\r\n  set logoutDate(logoutDate: Date) {\r\n    sessionStorage.setItem('logoutDate', JSON.stringify(logoutDate));\r\n  }\r\n\r\n  constructor(private _http: HttpClient) { }\r\n\r\n  /*\r\n  getAuthorizationHeader() {\r\n      console.log('** Webin authorization header **');\r\n      return 'Basic ' + btoa(this.username + ':' + this.password);\r\n  }\r\n  */\r\n\r\n  getAuthorizationTokenHeader() {\r\n      console.log('** Webin authorization token header **');\r\n      return 'Bearer ' + this.token;\r\n  }\r\n\r\n  logout() {\r\n    // console.log('logout');\r\n\r\n    sessionStorage.removeItem('username');\r\n    sessionStorage.removeItem('token');\r\n    sessionStorage.removeItem('authenticated');\r\n    sessionStorage.removeItem('account');\r\n    sessionStorage.removeItem('ega');\r\n    sessionStorage.removeItem('loginDate');\r\n    sessionStorage.removeItem('logoutDate');\r\n  }\r\n\r\n  login(username: string, password: string): Observable<WebinAuthenticationResultInterface> {\r\n    const baseUrl: string = environment.webinAuthenticationServiceUrl;\r\n    // console.log('Webin authentication login', baseUrl);\r\n\r\n    this.username = username;\r\n    const today = new Date();\r\n    this.loginDate = today;\r\n    this.logoutDate = new Date(today.getFullYear(), today.getMonth(), today.getDate() + 7);\r\n\r\n    const body = { authRealms: [ 'SRA', 'EGA' ], password: password, username: this.username };\r\n    const headers: HttpHeaders = new HttpHeaders()\r\n      .append('Content-Type', 'application/json')\r\n      .append('Accept', '*/*');\r\n\r\n    return this._http.post<WebinAuthenticationResultInterface>(baseUrl, body, { headers, withCredentials: false });\r\n  }\r\n\r\n  loginToken(username: string, password: string): Observable<string> {\r\n    const baseUrl: string = environment.webinAuthenticationTokenUrl;\r\n    // console.log('Webin authentication token', baseUrl);\r\n\r\n    this.username = username;\r\n    const today = new Date();\r\n    this.loginDate = today;\r\n    this.logoutDate = new Date(today.getFullYear(), today.getMonth(), today.getDate() + 7);\r\n\r\n    const body = { authRealms: [ 'SRA', 'EGA' ], password: password, username: this.username };\r\n    const headers: HttpHeaders = new HttpHeaders()\r\n      .append('Content-Type', 'application/json')\r\n      .append('Accept', '*/*');\r\n\r\n    return this._http.post(baseUrl, body, { headers, withCredentials: false, responseType: 'text' });\r\n  }\r\n}\r\n","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\n\r\nimport { Injectable } from '@angular/core';\r\nimport { CanActivate, Router, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\r\n\r\nimport { WebinGdprService } from './webin-gdpr.service';\r\n\r\n@Injectable()\r\nexport class WebinGdprGuardService implements CanActivate {\r\n\r\n  constructor(private webinGdprService: WebinGdprService, private router: Router) {}\r\n\r\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean {\r\n    return true;\r\n    /*\r\n    console.log('WebinGdprGuardService');\r\n\r\n    if (this.webinGdprService.consented) {\r\n      console.log('WebinGdprGuardService: consented');\r\n      return true;\r\n    }\r\n    else {\r\n      this.router.navigate(['consent']);\r\n      return false;\r\n    }\r\n    */\r\n  }\r\n}\r\n","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\n\r\nimport { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Router } from '@angular/router';\r\nimport { environment } from '../environments/environment';\r\nimport { WebinGdprServiceInterface } from './webin-gdpr.service.interface';\r\n\r\n@Injectable()\r\nexport class WebinGdprService implements WebinGdprServiceInterface {\r\n\r\n  private _baseUrl = environment.webinGdprServiceUrl;\r\n\r\n  // TODO check consent\r\n  consented = false;\r\n\r\n  constructor(private _http: HttpClient, private _router: Router) { }\r\n\r\n  consent() {\r\n    console.log('** Webin consent **', this._baseUrl);\r\n\r\n    this.consented = true;\r\n\r\n    // TODO set consent\r\n\r\n    this._router.navigateByUrl('');\r\n  }\r\n}\r\n","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\n\r\nimport { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { environment } from '../environments/environment';\r\n\r\nimport { WebinAuthenticationService } from './webin-authentication.service';\r\nimport { WebinReportServiceInterface } from './webin-report.service.interface';\r\n\r\n@Injectable()\r\nexport class WebinReportService implements WebinReportServiceInterface {\r\n\r\n  private _baseUrl = environment.webinReportServiceUrl;\r\n\r\n  constructor(private _webinAuthenticationService: WebinAuthenticationService, private _http: HttpClient) { }\r\n\r\n  getStudiesAll(status: string, rows: string, format: string) {\r\n    return this.getAll('studies', status, rows, format);\r\n  }\r\n  getStudies(id: string, rows: string, format: string) {\r\n    return this.getById('studies', id, rows, format);\r\n  }\r\n\r\n  getProjectsAll(status: string, rows: string, format: string) {\r\n    return this.getAll('projects', status, rows, format);\r\n  }\r\n  getProjects(id: string, rows: string, format: string) {\r\n    return this.getById('projects', id, rows, format);\r\n  }\r\n\r\n  getSamplesAll(status: string, rows: string, format: string) {\r\n    return this.getAll('samples', status, rows, format);\r\n  }\r\n  getSamples(id: string, rows: string, format: string) {\r\n    return this.getById('samples', id, rows, format);\r\n  }\r\n\r\n  getRunsAll(status: string, rows: string, format: string) {\r\n    return this.getAll('runs', status, rows, format);\r\n  }\r\n  getRuns(id: string, rows: string, format: string) {\r\n    return this.getById('runs', id, rows, format);\r\n  }\r\n\r\n  getAnalysesAll(status: string, analysisType: string, rows: string, format: string) {\r\n    const params = {};\r\n    if (status) {\r\n      params['status'] = status;\r\n    }\r\n    if (analysisType) {\r\n      params['analysis-type'] = analysisType;\r\n    }\r\n    return this.getAllParams('analyses', params, rows, format);\r\n  }\r\n  getAnalyses(id: string, rows: string, format: string) {\r\n    return this.getById('analyses', id, rows, format);\r\n  }\r\n\r\n  getRunFilesAll(archiveStatus: string, rows: string, format: string) {\r\n    const params = {};\r\n    if (archiveStatus) {\r\n      params['archive-status'] = archiveStatus;\r\n    }\r\n    return this.getAllParams('run-files', params, rows, format);\r\n  }\r\n  getRunFiles(id: string, rows: string, format: string) {\r\n    return this.getById('run-files', id, rows, format);\r\n  }\r\n\r\n  getAnalysisFilesAll(analysisType: string, archiveStatus: string, rows: string, format: string) {\r\n    const params = {};\r\n    if (analysisType) {\r\n      params['analysis-type'] = analysisType;\r\n    }\r\n    if (archiveStatus) {\r\n      params['archive-status'] = archiveStatus;\r\n    }\r\n    return this.getAllParams('analysis-files', params, rows, format);\r\n  }\r\n  getAnalysisFiles(id: string, rows: string, format: string) {\r\n    return this.getById('analysis-files', id, rows, format);\r\n  }\r\n\r\n  getRunProcessAll(processStatus: string, rows: string, format: string) {\r\n    const params = {};\r\n    if (processStatus) {\r\n      params['process-status'] = processStatus;\r\n    }\r\n    return this.getAllParams('run-process', params, rows, format);\r\n  }\r\n\r\n  getRunProcess(id: string, rows: string, format: string) {\r\n    return this.getById('run-process', id, rows, format);\r\n  }\r\n\r\n  getAnalysisProcessAll(analysisType: string, processStatus: string, rows: string, format: string) {\r\n    const params = {};\r\n    if (analysisType) {\r\n      params['analysis-type'] = analysisType;\r\n    }\r\n    if (processStatus) {\r\n      params['process-status'] = processStatus;\r\n    }\r\n    return this.getAllParams('analysis-process', params, rows, format);\r\n  }\r\n\r\n  getAnalysisProcess(id: string, rows: string, format: string) {\r\n    return this.getById('analysis-process', id, rows, format);\r\n  }\r\n\r\n  getUnsubmittedFilesAll(status: string, rows: string, format: string) {\r\n    const params = {};\r\n    return this.getAllParams('unsubmitted-files', params, rows, format);\r\n  }\r\n\r\n  getDacsAll(status: string, rows: string, format: string) {\r\n    return this.getAll('dacs', status, rows, format);\r\n  }\r\n  getDacs(id: string, rows: string, format: string) {\r\n    return this.getById('dacs', id, rows, format);\r\n  }\r\n\r\n  getPoliciesAll(status: string, rows: string, format: string) {\r\n    return this.getAll('policies', status, rows, format);\r\n  }\r\n  getPolicies(id: string, rows: string, format: string) {\r\n    return this.getById('policies', id, rows, format);\r\n  }\r\n\r\n  getDatasetsAll(status: string, rows: string, format: string) {\r\n    return this.getAll('datasets', status, rows, format);\r\n  }\r\n  getDatasets(id: string, rows: string, format: string) {\r\n    return this.getById('datasets', id, rows, format);\r\n  }\r\n\r\n  getChecklistGroups(type: string) {\r\n      const params = {};\r\n      params['type'] = type;\r\n      const url: string = this._baseUrl + '/checklist-groups' + '?' + this.getUrlParams(params);\r\n      return this._http.get(url);\r\n  }\r\n  getChecklists(type: string) {\r\n      const params = {};\r\n      params['type'] = type;\r\n      const url: string = this._baseUrl + '/checklists' + '?' + this.getUrlParams(params);\r\n      return this._http.get(url);\r\n  }\r\n  getChecklistXmls(type: string) {\r\n      const params = {};\r\n      params['type'] = type;\r\n      const url: string = this._baseUrl + '/checklists/xml/*' + '?' + this.getUrlParams(params);\r\n      return this._http.get(url, { responseType: 'text', observe: 'response' });\r\n  }\r\n\r\n  private getAll(reportType: string, status: string, rows: string, format: string) {\r\n    const params = {};\r\n    if (status) {\r\n      params['status'] = status;\r\n    }\r\n    params['max-results'] = rows;\r\n    params['format'] = format;\r\n    const url: string = this._baseUrl + '/' + reportType + '?' + this.getUrlParams(params);\r\n\r\n    if (format === 'json') {\r\n      // console.log(url);\r\n      return this._http.get(url);\r\n    }\r\n    if (format === 'csv') {\r\n      return this.getCsvUrlWithToken(url);\r\n    }\r\n  }\r\n\r\n  private getAllParams(reportType: string, params, rows: string, format: string) {\r\n    params['max-results'] = rows;\r\n    params['format'] = format;\r\n    const url: string = this._baseUrl + '/' + reportType + '?' + this.getUrlParams(params);\r\n\r\n    if (format === 'json') {\r\n      // console.log(url);\r\n      return this._http.get(url);\r\n    }\r\n    if (format === 'csv') {\r\n      return this.getCsvUrlWithToken(url);\r\n    }\r\n  }\r\n\r\n  private getUrlParams(params) {\r\n    const ret = [];\r\n    for (const param in params) {\r\n      if (params.hasOwnProperty(param)) {\r\n        ret.push(encodeURIComponent(param) + '=' + encodeURIComponent(params[param]));\r\n      }\r\n    }\r\n    return ret.join('&');\r\n  }\r\n\r\n  private getById(reportType: string, id: string, rows: string, format: string) {\r\n    const params = {};\r\n    params['max-results'] = rows;\r\n    params['format'] = format;\r\n    const url: string = this._baseUrl + '/' + reportType + '/' + encodeURIComponent(id.trim()) + '?' + this.getUrlParams(params);\r\n\r\n    if (format === 'json') {\r\n      // console.log(url);\r\n      return this._http.get(url);\r\n    }\r\n    if (format === 'csv') {\r\n      return this.getCsvUrlWithToken(url);\r\n    }\r\n  }\r\n\r\n  private getCsvUrlWithToken(url: string) {\r\n    url = url + '&token=' + this._webinAuthenticationService.token;\r\n    // console.log(url);\r\n    return url;\r\n  }\r\n}\r\n","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\n\r\nimport { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { environment } from '../environments/environment';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { ReportType } from './report-type.enum';\r\nimport { WebinRestServiceInterface } from './webin-rest.service.interface';\r\nimport { WebinAuthenticationService } from './webin-authentication.service';\r\n\r\n@Injectable()\r\nexport class WebinRestService implements WebinRestServiceInterface {\r\n\r\n  private _baseUrl = environment.webinServiceUrl;\r\n\r\n  private _xmlParser = new DOMParser();\r\n\r\n  constructor(private _http: HttpClient,\r\n  private _webinAuthenticationService:WebinAuthenticationService) { }\r\n\r\n  private headers() {\r\n    return new HttpHeaders();\r\n  }\r\n\r\n  private appendXml(formData: FormData, name: string, blob: Blob) {\r\n    if (blob) {\r\n      let fileName: string = (blob as File).name;\r\n      if (!fileName) {\r\n        fileName = name.toLowerCase() + '.xml';\r\n      }\r\n      formData.append(name, blob, fileName);\r\n    }\r\n  }\r\n\r\n  private post(formData: FormData): Observable<string> {\r\n    const headers = this.headers();\r\n    return this._http.post(this._baseUrl, formData, { headers, responseType: 'text' });\r\n  }\r\n\r\n  updateXml(\r\n    reportType: ReportType,\r\n    xml: Blob): Observable<string> {\r\n     console.log('** Update XML **');\r\n     const formData: FormData = new FormData();\r\n\r\n     let submissionXml: Blob = new Blob([\r\n       '<SUBMISSION_SET>' +\r\n       '  <SUBMISSION>' +\r\n       '\t<ACTIONS>' +\r\n       '    \t\t<ACTION>' +\r\n       '    \t\t\t<MODIFY/>' +\r\n       '    \t\t</ACTION>' +\r\n       '    \t</ACTIONS>' +\r\n       '    </SUBMISSION>' +\r\n       '</SUBMISSION_SET>']);\r\n    if(this._webinAuthenticationService.ega) {\r\n      submissionXml=new Blob([\r\n       '<SUBMISSION_SET>' +\r\n       '  <SUBMISSION broker_name=\"EGA\">' +\r\n       '\t<ACTIONS>' +\r\n       '    \t\t<ACTION>' +\r\n       '    \t\t\t<MODIFY/>' +\r\n       '    \t\t</ACTION>' +\r\n       '    \t\t<ACTION>' +\r\n       '    \t\t\t<PROTECT/>' +\r\n       '    \t\t</ACTION>' +\r\n       '    \t</ACTIONS>' +\r\n       '    </SUBMISSION>' +\r\n       '</SUBMISSION_SET>']);\r\n    }\r\n     this.appendXml(formData, 'SUBMISSION', submissionXml);\r\n\r\n     switch (reportType) {\r\n        case ReportType.studies: {\r\n          this.appendXml(formData, 'STUDY', xml);\r\n          break;\r\n        }\r\n        case ReportType.projects: {\r\n          this.appendXml(formData, 'PROJECT', xml);\r\n          break;\r\n        }\r\n        case ReportType.samples: {\r\n          this.appendXml(formData, 'SAMPLE', xml);\r\n          break;\r\n        }\r\n        case ReportType.experiments: {\r\n          this.appendXml(formData, 'EXPERIMENT', xml);\r\n          break;\r\n        }\r\n        case ReportType.runs: {\r\n          this.appendXml(formData, 'RUN', xml);\r\n          break;\r\n        }\r\n        case ReportType.analyses: {\r\n          this.appendXml(formData, 'ANALYSIS', xml);\r\n          break;\r\n        }\r\n        case ReportType.dacs: {\r\n          this.appendXml(formData, 'DAC', xml);\r\n          break;\r\n        }\r\n        case ReportType.policies: {\r\n          this.appendXml(formData, 'POLICY', xml);\r\n          break;\r\n        }\r\n        case ReportType.datasets: {\r\n          this.appendXml(formData, 'DATASET', xml);\r\n          break;\r\n        }\r\n    }\r\n\r\n    console.log('** webin submission form data **', formData);\r\n    return this.post(formData);\r\n  }\r\n\r\n  submitXml(\r\n    submissionXml: Blob,\r\n    studyXml: Blob,\r\n    projectXml: Blob,\r\n    sampleXml: Blob,\r\n    experimentXml: Blob,\r\n    runXml: Blob,\r\n    analysisXml: Blob,\r\n    dacXml: Blob,\r\n    policyXml: Blob,\r\n    datasetXml: Blob): Observable<string> {\r\n\r\n    console.log('** Submit XML **');\r\n    const formData: FormData = new FormData();\r\n    this.appendXml(formData, 'SUBMISSION', submissionXml);\r\n    this.appendXml(formData, 'STUDY', studyXml);\r\n    this.appendXml(formData, 'PROJECT', projectXml);\r\n    this.appendXml(formData, 'SAMPLE', sampleXml);\r\n    this.appendXml(formData, 'EXPERIMENT', experimentXml);\r\n    this.appendXml(formData, 'RUN', runXml);\r\n    this.appendXml(formData, 'ANALYSIS', analysisXml);\r\n    this.appendXml(formData, 'DAC', dacXml);\r\n    this.appendXml(formData, 'POLICY', policyXml);\r\n    this.appendXml(formData, 'DATASET', datasetXml);\r\n    return this.post(formData);\r\n  }\r\n\r\n  parseResult(data: string) {\r\n\r\n    const xmlDoc = this._xmlParser.parseFromString(data, 'text/xml');\r\n    const rootNode: any = xmlDoc.getElementsByTagName('RECEIPT')[0];\r\n    const isError: boolean = (rootNode.getAttribute('success') !== 'true');\r\n    const date: string = rootNode.getAttribute('receiptDate');\r\n\r\n    const receipt = {\r\n      isError: isError,\r\n      xml: data,\r\n      date: date,\r\n      accessions: [],\r\n      errors: []\r\n    };\r\n\r\n    let i = 0;\r\n\r\n    if (!isError) {\r\n      const nodes = rootNode.childNodes;\r\n      // Safer not use forEach for NodeList.\r\n      for (i = 0; i < nodes.length; i++) {\r\n        const childNode = nodes[i];\r\n        if (childNode.tagName === 'ANALYSIS' ||\r\n            childNode.tagName === 'EXPERIMENT' ||\r\n            childNode.tagName === 'RUN' ||\r\n            childNode.tagName === 'SAMPLE' ||\r\n            childNode.tagName === 'STUDY' ||\r\n            childNode.tagName === 'DAC' ||\r\n            childNode.tagName === 'POLICY' ||\r\n            childNode.tagName === 'DATASET' ||\r\n            childNode.tagName === 'PROJECT' ||\r\n            ( childNode.tagName === 'SUBMISSION' && childNode.getAttribute('accession'))) {\r\n          receipt.accessions.push(\r\n            {\r\n              type: childNode.tagName,\r\n              accession: childNode.getAttribute('accession'),\r\n              alias: childNode.getAttribute('alias')\r\n            });\r\n        }\r\n      }\r\n    } else {\r\n      const messageRootNode = rootNode.getElementsByTagName('MESSAGES')[0];\r\n      const nodes = messageRootNode.getElementsByTagName('ERROR');\r\n      // Safer not use forEach for NodeList.\r\n      for (i = 0; i < nodes.length; i++) {\r\n        receipt.errors.push(\r\n          {\r\n            error: nodes[i].textContent\r\n          });\r\n      }\r\n    }\r\n\r\n    return receipt;\r\n  }\r\n}\r\n","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\n\r\nimport { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { environment } from '../environments/environment';\r\nimport { WebinXmlReportServiceInterface } from './webin-xml-report.service.interface';\r\n\r\n@Injectable()\r\nexport class WebinXmlReportService implements WebinXmlReportServiceInterface {\r\n\r\n  private _baseUrl = environment.webinXmlReportServiceUrl;\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  getStudyXml(id: string): Observable<string> {\r\n    return this.getXml('studies', id);\r\n  }\r\n  getProjectXml(id: string): Observable<string> {\r\n    return this.getXml('projects', id);\r\n  }\r\n  getSampleXml(id: string): Observable<string> {\r\n    return this.getXml('samples', id);\r\n  }\r\n  getRunXml(id: string): Observable<string> {\r\n    return this.getXml('runs', id);\r\n  }\r\n  getExperimentXml(id: string): Observable<string> {\r\n    return this.getXml('experiments', id);\r\n  }\r\n  getAnalysisXml(id: string): Observable<string> {\r\n    return this.getXml('analyses', id);\r\n  }\r\n  getDacXml(id: string): Observable<string> {\r\n    return this.getXml('dacs', id);\r\n  }\r\n  getPolicyXml(id: string): Observable<string> {\r\n    return this.getXml('policies', id);\r\n  }\r\n  getDatasetXml(id: string): Observable<string> {\r\n    return this.getXml('datasets', id);\r\n  }\r\n\r\n  private getXml(xmlType: string, id: string): Observable<string> {\r\n    const url: string = this._baseUrl + '/' + xmlType + '/' + id + '?format=xml';\r\n    console.log(url);\r\n    return this.http.get(url, {responseType: 'text' });\r\n  }\r\n}\r\n","// The file contents for the current environment will overwrite these during build.\r\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\r\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\r\n// The list of which env maps to which file can be found in `.angular-cli.json`.\r\n\r\nexport const environment = {\r\n  production: false,\r\n  title: 'Webin submissions portal (DEV)',\r\n  webinServiceUrl: 'https://wwwdev.ebi.ac.uk/ena/submit/drop-box/submit/',\r\n  webinAuthenticationServiceUrl: 'https://www.ebi.ac.uk/ena/auth/login',\r\n  webinAuthenticationTokenUrl: 'https://www.ebi.ac.uk/ena/auth/token',\r\n  webinReportServiceUrl: 'https://wwwdev.ebi.ac.uk/ena/submit/report',\r\n  webinXmlReportServiceUrl: 'https://wwwdev.ebi.ac.uk/ena/submit/drop-box',\r\n  webinGdprServiceUrl: 'TODO'\r\n};\r\n","/*\r\n * Copyright 2018 EMBL - European Bioinformatics Institute\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software distributed under the\r\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n * specific language governing permissions and limitations under the License.\r\n */\r\n\r\nimport { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.log(err));\r\n"],"sourceRoot":""}